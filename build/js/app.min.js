(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
module.exports={
  "name": "nameless-game",
  "version": "0.1.0",
  "description": "nameless",
  "main": "build/js/app.min.js",
  "scripts": {
    "test": "echo \"Error: no test specified\" && exit 1"
  },
  "repository": {
    "type": "git",
    "url": "git@github.com:olivierrr/nameless-game.git"
  },
  "author": "olivierrr",
  "license": "MIT",
  "browser": {
    "lodash": "./node_modules/lodash/dist/lodash.compat.js",
    "Stats": "./src/js/lib/stats.min.js"
  },
  "browserify-shim": {
    "lodash": {
      "exports": "_"
    },
    "Stats": {
      "exports": "Stats"
    }
  },
  "devDependencies": {
    "browserify": "^4.1.5",
    "browserify-shim": "^3.5.0",
    "grunt": "^0.4.5",
    "grunt-browserify": "^2.1.0",
    "grunt-cache-bust": "^0.3.6",
    "grunt-contrib-clean": "^0.5.0",
    "grunt-contrib-connect": "^0.7.1",
    "grunt-contrib-copy": "^0.5.0",
    "grunt-contrib-jade": "^0.11.0",
    "grunt-contrib-jshint": "^0.10.0",
    "grunt-contrib-stylus": "^0.16.0",
    "grunt-contrib-uglify": "^0.4.0",
    "grunt-contrib-watch": "^0.6.1",
    "grunt-open": "^0.2.3",
    "grunt-pngmin": "^0.6.1"
  },
  "dependencies": {
    "grunt-contrib-compress": "^0.9.1",
    "lodash": "^2.4.1",
    "node-static": "^0.7.6",
    "phaser": "^2.1.1",
    "socket.io": "^1.1.0"
  }
}

},{}],2:[function(require,module,exports){

var Player = require('./Player')

/*
 * Arena class
 *
 * @constructor Arena
 */
var Arena = function (game) {

	/*
	 * @reference {Phaser.game} game
	 */
	this.game = game

	/*
	 * @references {Player}
	 */
	this.players = {}

	this.init()

	return this
}

/*
 * @method init
 */
Arena.prototype.init = function() {
	this.game.physics.startSystem(Phaser.Physics.P2JS)

  this.game.physics.p2.gravity.y = 800

  this.game.physics.p2.world.solver.iterations = 1000
  this.game.physics.p2.world.solver.frictionIterations = 1000

  this.game.physics.wallMaterial = this.game.physics.p2.createMaterial('wallMaterial')
  this.game.physics.p2.setWorldMaterial(this.game.physics.wallMaterial, true, true, true, true)

  // Turn on impact events for the world, without this we get no collision callbacks
  this.game.physics.p2.setImpactEvents(true)

  // debug
  window.P2 = this.game.physics.p2
}

/*
 * @method
 */
Arena.prototype.createPlayers = function () {
	this.players['p1'] = new Player(this.game, 200, 200)
	this.players['p2'] = new Player(this.game, 600, 200)
}

/*
 * @method
 */
Arena.prototype.resetPlayers = function () {
	this.forEachPlayer(function (p) {
		p.reset()
	})
}

/*
 * @method
 */
Arena.prototype.setControllers = function (p1, p2) {
	this.players['p1'].setController(p1 || 'dummy')
	this.players['p2'].setController(p2 || 'dummy')
}

/*
 * multi purpose player iterator
 *
 * @method
 */
Arena.prototype.forEachPlayer = function (cb) {
	var players = this.players
	Object.keys(players).forEach(function (p) { cb(players[p]) })
}

/*
 * @method
 */
Arena.prototype.newTurn = function () {
	this.forEachPlayer(function (p) {
		p.method1()
	})
}

/*
 * @method
 */
Arena.prototype.sameTurn = function () {
	this.forEachPlayer(function (p) {
		p.method2()
	})
}

/*
 * @method
 */
Arena.prototype.cinematicPlayback = function () {
	this.forEachPlayer(function (p) {
		p.cinematicExecuteMoves()
	})
}

/*
 * @method destroy
 */
Arena.prototype.destroy = function () {
	this.forEachPlayer(function (p) { 
		p.destroy() 
	})
	this.game.physics.destroy()
}

module.exports = Arena
},{"./Player":4}],3:[function(require,module,exports){

/*
 * Button class
 *
 * @constructor Button
 */
var Button = function (game, settings, cb) {

	var x = settings.x 			|| 100
	var y = settings.y 			|| 100
	var text = settings.text 	|| 'button'
	var font = settings.font 	|| '40px Arial'
	var fill = settings.fill 	|| '#ffffff'
	var align = settings.align	|| 'center'

	if(settings.sprite) {
		console.log('todo')
		//	todo - sprite background
	}

  this.btn = game.add.text(x, y, text, { font: font, fill: fill, align: align } )

  this.btn.anchor.setTo(0.5, 0.5)
  this.btn.inputEnabled = true

  this.btn.events.onInputDown.add(function() { cb() })
}

module.exports = Button
},{}],4:[function(require,module,exports){
var Ragdoll = require('./Ragdoll.js')

/*
 * Player class
 *
 * @extends Ragdoll
 * @constructor Player
 */
var Player = function (game, x, y) {

  /**
   * available controllers: 
   *  'me'      - controlled by users input
   *  'dummy'   - no conroller
   *  'network' - controller over network
   *
   * @property {String} controller
   * @default 'dummy'
   */
  this.controller = 'dummy'

	/**
	 * @reference {Phaser.game} game
	 */
	this.game = game

	/**
 	 * @Object {Phaser.group} ragdoll
	 */
	this.ragdoll = Ragdoll(game, x, y)

	/** 
   * @property {Boolen} isAllowingInput
   */
  this.isAllowingInput = true

  /**
   * a turn is an Array of actions
   * an 'action' is a joint event - ex: {jointName:'neck', type:'relax'}
   *
   * @property {Array} turnHistory
   */
  this.turnHistory = []

  /**
   * @property {Array} currentPosition
   */
  this.currentPosition = []

  /**
   * @property {Array} currentPosition
   */
  this.initialPosition = []

  /**
   * @property {Number} health
   */
  this.health = 100

  /**
   * request an animation playback
   *
   * @property {Boolean} isResetingPlayback
   */
  this.isResetingPlayback = false

  this.savePosition()
  this.initialPosition = this.currentPosition 
}

/**
 * pushes an empty turn Object to turnHistory
 * ragdoll.newAction will push moves to newly pushed Object
 *
 * @method newTurn
 */
Player.prototype.newTurn = function () {
  this.turnHistory.push({})

  // this shouldn't be here
  this.ragdoll.children.forEach(function (part) {
    part.loadTexture('whitesquare')
  })
}

/**
 * register a new move to latest turn on turnHistory
 *
 * @method newAction
 * @param {Object} move
 */
Player.prototype.newAction = function (move) {
  this.turnHistory[this.turnHistory.length-1][move.jointName] = move.type
}

/**
 * save current position and velocity
 * 
 * @method savePosition
*/
Player.prototype.savePosition = function () {

  this.currentPosition = this.ragdoll.children.map( function (part) {
    var data = part.body.data
    return {
      x: data.position[0], 
      y: data.position[1],
      vx: data.velocity[0],
      vy: data.velocity[1],
      angle: data.angle,
      angularVelocity: data.angularVelocity,
      wlambda: data.wlambda,
      vlambdax : data.vlambda[0],
      vlambday : data.vlambda[1]
    }
  })
}

/**
 * move ragdoll to last position on postision history
 * 
 * @method loadPosition
 */
Player.prototype.loadPosition = function () {

  var pos = this.currentPosition
  this.ragdoll.children.forEach(function(part, i) {
    var data = part.body.data
    data.position[0] = pos[i].x
    data.position[1] = pos[i].y
    data.angle = pos[i].angle,
    data.angularVelocity = pos[i].angularVelocity,
    data.velocity[0] = pos[i].vx,
    data.velocity[1] = pos[i].vy,
    data.wlambda = pos[i].wlambda,
    data.vlambda[0] = pos[i].vlambdax,
    data.vlambda[1] = pos[i].vlambday
  })
}

/**
 * create shallow copy of ragdolls position
 *
 * @method clone
 * @return {Phaser.Group}
*/
Player.prototype.clone = function () {
  var ragdollClone = this.game.add.group()

  this.ragdoll.children.forEach(function(part) {
    var clone = ragdollClone.create(part.position.x, part.position.y, part.key)
    clone.width = part.width
    clone.height = part.height
    clone.rotation = part.rotation
    clone.anchor.x = part.anchor.x
    clone.anchor.y = part.anchor.y
    clone.name = part.name
  })

  return ragdollClone
}

/*
 * @method setLastTurn
 */
Player.prototype.setLastTurn = function (turn) {
  this.turnHistory[this.turnHistory.length-1] = turn
}

/**
 * @method getLastTurn
 */
Player.prototype.getLastTurn = function () {
  return this.turnHistory[this.turnHistory.length-1]
}

/**
 * singleton clone
 *
 * todo - could be forcing position on previously made clone instead of destroying and creating new instance 
 *
 * @method shadow
 */
Player.prototype.shadow = function () {

  this.destroyShadow()

  this.shadowClone = this.clone()
  
  // TODO
  attachEvents(this.shadowClone, this)
}

/**
 * @method destroyShadow
 */
Player.prototype.destroyShadow = function() {
  if(this.shadowClone) this.shadowClone.destroy()
}

/**
 * move ragdoll
 *
 * @method executeMove
 * @param {String} jointName
 * @param {String} type
 */
Player.prototype.executeMove = function (jointName, type) {
  switch (type) {
    case 'expand'  : this.ragdoll.flex(jointName)     ;break
    case 'contract': this.ragdoll.contract(jointName) ;break
    case 'relax'   : this.ragdoll.relax(jointName)    ;break
    case 'tense'   : this.ragdoll.tense(jointName)    ;break
  }
}

/**
 * a turn is an array of moves
 *
 * @method executeMoves
 * @param {Array} turn
 */
Player.prototype.executeMoves = function (turn, alpha) {
  var _this = this

  _this.ragdoll.alpha = alpha || 1 

  Object.keys(turn).forEach(function (jointName) {
    _this.executeMove(jointName, turn[jointName])
  })
}

/**
 * @method cinematicExecuteMoves
 */
Player.prototype.cinematicExecuteMoves = function () {
  this.destroyShadow()
  this.executeMoves(this.getLastTurn(), 1)
}

/**
 * works like nodes EventEmitter.once for @property isResetingPlayback
 *
 * @method resetPlayback
 */
Player.prototype.resetPlayback = function () {
  if(this.isResetingPlayback === true) {
    this.isResetingPlayback = false
    return true
  }
  else return false
}

/**
 * shim p2.onBeginContact to work on Phaser.group @ragdoll
 *
 * @method onCollision
 */
Player.prototype.onCollision = function (cb) {
  this.ragdoll.children.forEach(function (part) {
    part.body.onBeginContact.add(function (a, b, c, d) {
      cb(a, b, c, d)
    })
  })
}

/**
 * reset back to initial instance position
 *
 * @method reset
 */
Player.prototype.reset = function() {
  this.turnHistory = []
  this.currentPosition = this.initialPosition
  this.loadPosition()
  this.destroyShadow()
}

/**
 * @method destroy
 */
Player.prototype.destroy = function() {
  if(this.shadowClone) this.shadowClone.destroy()
  this.ragdoll.destroy()
  this.turnHistory = null
  this.currentPosition = null
  this.initialPosition = null
}

//// TODO ////

// TEMP - TODO
function attachEvents (ragdoll, ctx) {
	ragdoll.children.forEach(function(part){
    part.inputEnabled = true
    part.events.onInputDown.add(function(e) {
      muscleClick.call(ctx, e.name)
    })
  })
}

// TEMP - TODO
function muscleClick (muscleName) {

  if(this.isAllowingInput === false) return

  //if(muscleName === 'upperBody') return
  //if(muscleName === 'pelvis') return

  joint = {
    'head'         : 'neckJoint',
    'upperLeftArm' : 'leftShoulder',
    'lowerLeftArm' : 'leftElbowJoint',
    'upperRightArm': 'rightShoulder',
    'lowerRightArm': 'rightElbowJoint',
    'upperLeftLeg' : 'leftHipJoint',   
    'lowerLeftLeg' : 'leftKneeJoint',  
    'upperRightLeg': 'rightHipJoint', 
    'lowerRightLeg': 'rightKneeJoint', 
    'pelvis'       : 'spineJoint',     
    'upperBody'    : 'spineJoint'
  }

  var jointName = joint[muscleName]
  var jointState = this.getLastTurn()[jointName]
  var action

  if(jointState === 'expand') action = 'contract'
  else if(jointState === 'contract') action = 'relax'
  else if(jointState === 'relax') action = 'expand'
  else action = 'expand'

  console.log(action, jointName)

  this.newAction({
  	jointName: jointName, 
  	type: action
  })

  textures = {
    'expand'  : 'redsquare',
    'contract': 'bluesquare',
    'relax'   : 'whitesquare'
  }

  this.shadowClone.children.filter(function (part) {
    return part.name === muscleName
  })[0].loadTexture(textures[action])

  this.isResetingPlayback = true
}

Player.prototype.setController = function(controller) {
  this.controller = controller

  if(controller === 'dummy') {
    this.isAllowingInput = false
  }
  if(controller === 'network') {
    this.isAllowingInput = false
  }
  if(controller === 'me') {

  }
}

// -todo
Player.prototype.method1 = function () {
  this.ragdoll.alpha = 0.5
	this.ragdoll.relaxAll()
  this.newTurn()
  this.savePosition()
  this.shadow()
}
// -todo
Player.prototype.method2 = function () {
  
	this.loadPosition()
  this.ragdoll.relaxAll()
  
  this.executeMoves(this.getLastTurn(), 0.5)
}

module.exports = Player
},{"./Ragdoll.js":5}],5:[function(require,module,exports){
module.exports = function(game, offsetX, offsetY) {

  var CONSTRAINT_FORCE = 999999999999
  var M = 100 // scale
  var MOTOR_FORCE = 5

  var bodySprites = {}
  var bodyJoints = {}
  var bodyParts = {}

  // normalized scales
  var sizes = {}
  sizes.shouldersDistance = 0.4
  sizes.upperArmLength = 0.5
  sizes.lowerArmLength = 0.5
  sizes.upperArmSize = 0.2
  sizes.lowerArmSize = 0.2
  sizes.neckLength = 0.1
  sizes.headRadius = 0.15
  sizes.upperBodyLength = 0.6
  sizes.pelvisLength = 0.4
  sizes.upperLegLength = 0.6
  sizes.upperLegSize = 0.2
  sizes.lowerLegSize = 0.2
  sizes.lowerLegLength = 0.5

  // apply scale multiplier
  Object.keys(sizes).forEach(function(key) {
    sizes[key] *= M
  })

  // Lower legs
  bodyParts.lowerLeftLeg = {
    x: -sizes.shouldersDistance / 2,
    y: sizes.lowerLegLength / 2,
    w: sizes.lowerLegSize,
    h: sizes.lowerLegLength,
    mass: 0.6
  }
  bodyParts.lowerRightLeg = {
    x: sizes.shouldersDistance / 2,
    y: sizes.lowerLegLength / 2,
    w: sizes.lowerLegSize,
    h: sizes.lowerLegLength,
    mass: 0.6
  }
  // Upper legs
  bodyParts.upperLeftLeg = {
    x: -sizes.shouldersDistance / 2,
    y: bodyParts.lowerLeftLeg.y + sizes.lowerLegLength / 2 + sizes.upperLegLength / 2,
    w: sizes.upperLegSize,
    h: sizes.upperLegLength,
    mass: 0.5
  }
  bodyParts.upperRightLeg = {
    x: sizes.shouldersDistance / 2,
    y: bodyParts.lowerRightLeg.y + sizes.lowerLegLength / 2 + sizes.upperLegLength / 2,
    w: sizes.upperLegSize,
    h: sizes.upperLegLength,
    mass: 0.5
  }
  // Pelvis
  bodyParts.pelvis = {
    x: 0,
    y: bodyParts.upperLeftLeg.y + sizes.upperLegLength / 2 + sizes.pelvisLength / 2,
    w: sizes.shouldersDistance,
    h: sizes.pelvisLength,
    mass: 0.7
  }
  // Upper body
  bodyParts.upperBody = {
    x: 0,
    y: bodyParts.pelvis.y + sizes.pelvisLength / 2 + sizes.upperBodyLength / 2,
    w: sizes.shouldersDistance,
    h: sizes.upperBodyLength,
    mass: 1.0
  }
  // Head
  bodyParts.head = {
    x: 0,
    y: bodyParts.upperBody.y + sizes.upperBodyLength / 2 + sizes.headRadius + sizes.neckLength,
    w: sizes.headRadius * 2,
    h: sizes.headRadius * 2,
    mass: 0.3
  }
  // Upper arms
  bodyParts.upperLeftArm = {
    x: -sizes.shouldersDistance / 2 - sizes.upperArmLength / 2,
    y: bodyParts.upperBody.y + sizes.upperBodyLength / 2,
    w: sizes.upperArmLength,
    h: sizes.upperArmSize,
    mass: 0.4
  }
  bodyParts.upperRightArm = {
    x: sizes.shouldersDistance / 2 + sizes.upperArmLength / 2,
    y: bodyParts.upperBody.y + sizes.upperBodyLength / 2,
    w: sizes.upperArmLength,
    h: sizes.upperArmSize,
    mass: 0.4
  }
  // lower arms
  bodyParts.lowerLeftArm = {
    x: bodyParts.upperLeftArm.x - sizes.lowerArmLength / 2 - sizes.upperArmLength / 2,
    y: bodyParts.upperLeftArm.y,
    w: sizes.lowerArmLength,
    h: sizes.lowerArmSize,
    mass: 0.6
  }
  bodyParts.lowerRightArm = {
    x: bodyParts.upperRightArm.x + sizes.lowerArmLength / 2 + sizes.upperArmLength / 2,
    y: bodyParts.upperRightArm.y,
    w: sizes.lowerArmLength,
    h: sizes.lowerArmSize,
    mass: 0.6
  }
  // Neck
  bodyJoints.neckJoint = {
    a: 'head',
    b: 'upperBody',
    pivot_a: [0, -sizes.headRadius - sizes.neckLength / 2],
    pivot_b: [0, sizes.upperBodyLength / 2],
    limits: [-Math.PI/10, Math.PI/10]
  }
  // Knees
  bodyJoints.leftKneeJoint = {
    a: 'lowerLeftLeg',
    b: 'upperLeftLeg',
    pivot_a: [0, sizes.lowerLegLength / 2],
    pivot_b: [0, -sizes.upperLegLength / 2],
    limits: [-Math.PI/2, Math.PI/2]
  }
  bodyJoints.rightKneeJoint = {
    a: 'lowerRightLeg',
    b: 'upperRightLeg',
    pivot_a: [0, sizes.lowerLegLength / 2],
    pivot_b: [0, -sizes.upperLegLength / 2],
    limits: [-Math.PI/2, Math.PI/2]
  }
  // Hips
  bodyJoints.leftHipJoint = {
    a: 'upperLeftLeg',
    b: 'pelvis',
    pivot_a: [0, sizes.upperLegLength / 2],
    pivot_b: [-sizes.shouldersDistance / 2, -sizes.pelvisLength / 2],
    limits: [-Math.PI/4, Math.PI/4]
  }
  bodyJoints.rightHipJoint = {
    a: 'upperRightLeg',
    b: 'pelvis',
    pivot_a: [0, sizes.upperLegLength / 2],
    pivot_b: [sizes.shouldersDistance / 2, -sizes.pelvisLength / 2],
    limits: [-Math.PI/4, Math.PI/4]
  }
  // Spine
  bodyJoints.spineJoint = {
    a: 'pelvis',
    b: 'upperBody',
    pivot_a: [0, sizes.pelvisLength / 2],
    pivot_b: [0, -sizes.upperBodyLength / 2],
    limits: [-Math.PI/12, Math.PI/12]
  }
  // Shoulders
  bodyJoints.leftShoulder = {
    a: 'upperBody',
    b: 'upperLeftArm',
    pivot_a: [-sizes.shouldersDistance / 2, sizes.upperBodyLength / 2],
    pivot_b: [sizes.upperArmLength / 2, 0],
    limits: [-Math.PI/3, Math.PI/3]
  }
  bodyJoints.rightShoulder = {
    a: 'upperBody',
    b: 'upperRightArm',
    pivot_a: [sizes.shouldersDistance / 2, sizes.upperBodyLength / 2],
    pivot_b: [-sizes.upperArmLength / 2, 0],
    limits: [-Math.PI/3, Math.PI/3]
  }
  // Elbows
  bodyJoints.leftElbowJoint = {
    a: 'lowerLeftArm',
    b: 'upperLeftArm',
    pivot_a: [sizes.lowerArmLength / 2, 0],
    pivot_b: [-sizes.upperArmLength / 2, 0],
    limits: [-Math.PI/4, Math.PI/4]
  }
  bodyJoints.rightElbowJoint = {
    a: 'lowerRightArm',
    b: 'upperRightArm',
    pivot_a: [-sizes.lowerArmLength / 2, 0],
    pivot_b: [sizes.upperArmLength / 2, 0],
    limits: [-Math.PI/4, Math.PI/4]
  }

  //

  var ragdoll = game.add.group(null, null, 'ragdoll')

  var collisionGroup = game.physics.p2.createCollisionGroup()
  game.physics.p2.updateBoundsCollisionGroup()

  console.log(collisionGroup)

  /**
   * create muscles
   */
  Object.keys(bodyParts).forEach(function (key) {

    var x = bodyParts[key].x + offsetX
    var y = bodyParts[key].y + offsetY
    var w = bodyParts[key].w
    var h = bodyParts[key].h
    var mass = bodyParts[key].mass
    var sprite = 'whitesquare'

    var part = ragdoll.create(x, y, 'whitesquare')

    part.width = w
    part.height = h
    part.name = key

    game.physics.p2.enable(part)
    part.body.setCollisionGroup(collisionGroup)

    part.body.mass = mass

    var wallMaterial = game.physics.wallMaterial
    var partMaterial = game.physics.p2.createMaterial(key+'Material', part.body)

    var contactMaterial = game.physics.p2.createContactMaterial(partMaterial, wallMaterial)

    contactMaterial.friction = 100         // Friction to use in the contact of these two materials.
    // contactMaterial.restitution = 0        // Restitution (i.e. how bouncy it is!) to use in the contact of these two materials.
    // contactMaterial.stiffness = 1e7          // Stiffness of the resulting ContactEquation that this ContactMaterial generate.
    // contactMaterial.relaxation = 3           // Relaxation of the resulting ContactEquation that this ContactMaterial generate.
    // contactMaterial.frictionStiffness = 1e7  // Stiffness of the resulting FrictionEquation that this ContactMaterial generate.
    // contactMaterial.frictionRelaxation = 100 // Relaxation of the resulting FrictionEquation that this ContactMaterial generate.
    // contactMaterial.surfaceVelocity = 0      // Will add surface velocity to this material. If bodyA rests on top if bodyB, and the surface velocity is positive, bodyA will slide to the right.

    bodySprites[key] = part
  })

  /**
   * create joints
   */
  Object.keys(bodyJoints).forEach(function (key) {

    var joint = bodyJoints[key]
    
    var constraint = game.physics.p2.createRevoluteConstraint
      (
        bodySprites[joint.a], 
        joint.pivot_a, 
        bodySprites[joint.b], 
        joint.pivot_b, 
        CONSTRAINT_FORCE
      )

    constraint.setLimits(joint.limits[0], joint.limits[1])

    //constraint.collideConnected = false

    constraint.lowerLimitEquation.needsUpdate = true
    constraint.upperLimitEquation.needsUpdate = true 

    // constraint.lowerLimitEquation.multiplier = 100
    // constraint.upperLimitEquation.multiplier = 100

    constraint.lowerLimitEquation.epsilon = 1000
    constraint.upperLimitEquation.epsilon = 1000

    constraint.motorEquation.relaxation = 1
    constraint.motorEquation.stiffness = 1100000

    if(!ragdoll.joints) ragdoll.joints = {}
    ragdoll.joints[key] = constraint
  })

  /**
   * enable joint motor
   * 
   * @method flex
   * @param {String} jointName
   */
  ragdoll.flex = function (jointName) {
    var joint = this.joints[jointName]
    joint.setMotorSpeed(0)
    joint.enableMotor()
    joint.setMotorSpeed(MOTOR_FORCE)
  }

  /**
   * enable joint motor
   * 
   * @method contract
   * @param {String} jointName
   */
  ragdoll.contract = function (jointName) {
    var joint = this.joints[jointName]
    joint.setMotorSpeed(0)
    joint.enableMotor()
    joint.setMotorSpeed(-MOTOR_FORCE)
  }

  /**
   * disabling motor on all joints
   *
   * @method relaxAll
   */
  ragdoll.relaxAll = function() {
    var _this = this
    Object.keys(_this.joints).forEach(function(joint) {
      _this.relax(joint)
    })
  }

  /**
   * disable joint motor
   *
   * @method relax
   * @param {String} jointName
   */
  ragdoll.relax = function(jointName) {
    var joint = ragdoll.joints[jointName]
    joint.disableMotor()
  }

  return ragdoll
}
},{}],6:[function(require,module,exports){

var properties = require('./properties')

var states = { 
	boot: require('./states/boot.js'),
	preloader: require('./states/preloader.js'),
	mainmenu: require('./states/mainmenu.js'),
	singleplayermenu: require('./states/singleplayermenu.js'),
	multiplayermenu: require('./states/multiplayermenu.js'),
	settingsmenu: require('./states/settingsmenu.js'),
	train: require('./states/train.js'),
	quickmatch: require('./states/quickmatch.js')
}

window.onload = function() {

	var Phaser = window.Phaser // hack
	var io = window.io // hack

	var game = new Phaser.Game(properties.size.x, properties.size.y, Phaser.AUTO, 'game')

	game.state.add('boot', states.boot(game))
	game.state.add('preloader', states.preloader(game))
	game.state.add('mainmenu', states.mainmenu(game))
	game.state.add('singleplayermenu', states.singleplayermenu(game))
	game.state.add('multiplayermenu', states.multiplayermenu(game))
	game.state.add('settingsmenu', states.settingsmenu(game))
	game.state.add('train', states.train(game))
	game.state.add('quickmatch', states.quickmatch(game))

	game.state.start('boot')
}
},{"./properties":7,"./states/boot.js":8,"./states/mainmenu.js":9,"./states/multiplayermenu.js":10,"./states/preloader.js":11,"./states/quickmatch.js":12,"./states/settingsmenu.js":13,"./states/singleplayermenu.js":14,"./states/train.js":15}],7:[function(require,module,exports){
var npmProperties = require('../../../package.json')

module.exports = { 

  title: 'Phaser JS Boilerplate',

  description: npmProperties.description,

  port: 3017,

  liveReloadPort: 3018,

  showStats: true,

  size: { 
    x: 800,
    y: 600
  }, 
  
  analyticsId: ''
}

},{"../../../package.json":1}],8:[function(require,module,exports){
var Stats = require('Stats')
  , properties = require('../properties')

module.exports = function(game) {

  // FPS counter
  function addStats() {
    var stats = new Stats()
    stats.setMode(0)
    stats.domElement.style.position = 'absolute'
    stats.domElement.style.left = '0px'
    stats.domElement.style.top = '0px'
    document.body.appendChild(stats.domElement)
    setInterval(function () {
      stats.begin()
      stats.end()
    }, 1000 / 60)
  }

  var gameState = {}

  gameState.preload = function () {
    game.stage.disableVisibilityChange = true
  }

  gameState.create = function () {

    if (properties.showStats) addStats()

    game.scale.pageAlignHorizontally = true
    game.scale.pageAlignVertically = true
    game.scale.refresh()

    game.state.start('preloader')
  }

  return gameState
}

},{"../properties":7,"Stats":16}],9:[function(require,module,exports){
var Button = require('../Button.js')

module.exports = function(game) {

  var gameState = {}

  gameState.preload = function () {
    game.stage.disableVisibilityChange = true
  }

  gameState.create = function () {

    var logo = game.add.sprite(game.world.centerX, 200, 'logo')
    logo.anchor.setTo(0.5, 0.5)

    var a = new Button(game, { x: game.world.centerX, y: 450, text: 'single player' },
    function () {
      game.state.start('singleplayermenu')
    })

    var b = new Button(game, { x: game.world.centerX, y: 500, text: 'multi player' },
    function () {
      game.state.start('multiplayermenu')
    })

    var c = new Button(game, { x: game.world.centerX, y: 550, text: 'settings' },
    function () {
      game.state.start('settingsmenu')
    })
  }

  gameState.update = function() {
  	
  }

  return gameState
}

},{"../Button.js":3}],10:[function(require,module,exports){
var Button = require('../Button.js')

module.exports = function(game) {

  var gameState = {}

  gameState.preload = function () {
    game.stage.disableVisibilityChange = true
  }

  gameState.create = function () {

    var backButton = new Button(game, { x: 100, y: 50, text: 'back' },
    function () {
      game.state.start('mainmenu')
    })

    var trainButton = new Button(game, { x: game.world.centerX, y: 300, text: 'quickmatch' },
    function () {
      game.state.start('quickmatch')
    })

  }

  return gameState
}
},{"../Button.js":3}],11:[function(require,module,exports){
module.exports = function(game) {

  var gameState = {}

  gameState.preload = function () {
    game.stage.disableVisibilityChange = true

    game.load.image('logo', 'images/phaser.png#grunt-cache-bust')
    game.load.image('redsquare', 'images/redsquare.png#grunt-cache-bust')
    game.load.image('bluesquare', 'images/bluesquare.jpg#grunt-cache-bust')
    game.load.image('whitesquare', 'images/whitesquare.png#grunt-cache-bust')
  }

  gameState.create = function () {
    game.state.start('mainmenu')
  }

  return gameState
}

},{}],12:[function(require,module,exports){
var Player = require('../Player.js')
var Arena = require('../Arena.js')
var Button = require('../Button.js')

var socket

module.exports = function(game) {

  var gameState = {}

  var p1, p2, isP1, isP2

  var id

  var players = []

  var frameCount = 0
  var newTurn = false
  var hasPlayedBack = false
  var isSpacebarLocked = false

  var currentWarning

  var arena

  gameState.preload = function () {
    game.stage.disableVisibilityChange = true
  }

  gameState.create = function () {

    socket = io('http://localhost:9000')

    arena = new Arena(game)
    arena.createPlayers()
    arena.newTurn()

    p1 = arena.players['p1']
    p2 = arena.players['p2']

    var backButton = new Button(game, { x: 100, y: 50, text: 'back' },
    function () {
      game.state.start('multiplayermenu')
    })

    function warning (message) {
      if(!currentWarning) {
        currentWarning = game.add.text(game.world.centerX, 150, message, { font: '30px Arial', fill: '#ffffff', align: 'center' } )
        currentWarning.anchor.setTo(0.5, 0.5)
      }
      currentWarning._text = message
      window.setTimeout(function () { 
        game.add.tween(currentWarning).to( {alpha: 0}, 1000, Phaser.Easing.Linear.None, true)
      }, 1000)
    }

    //

    socket.emit('join-lobby')

    socket.on('id', function(socketId) {
      console.log('id', socketId)
      id = socketId
      warning('you are ' + id)
    })

    // could recycle text objects
    socket.on('players-list', function (playerList) {
      players.forEach(function (p) { p.destroy() })
      players = playerList.map(function(player, i) {
        return game.add.text(550, 20*(i+1), player, {fill: '#ffffff', font: '16px Arial'})
      })
    })

    socket.on('new-game', function (players) {
      warning('game starting...')
      console.log('new-game', players)

      if(players.p1 === id) {
        isP1 = true
        p1.setController('me')
        warning('you are p1')
      } else {
        isP2 = false
        p1.setController('network')
      }

      if(players.p2 === id) {
        isP2 = true
        p2.setController('me')
        warning('you are p2')
      } else {
        isP2 = false
        p2.setController('network')
      }

      arena.resetPlayers()
      arena.newTurn()

      socket.on('turn', function (turn) {
        frameCount = 0
        p1.setLastTurn(turn.p1)
        p2.setLastTurn(turn.p2)
        p1.loadPosition()
        p2.loadPosition()
        newTurn = true
        console.log(turn)
      })
    })

    socket.on('game-over', function () {
      warning('game over')
      arena.resetPlayers()
      arena.newTurn()
    })

    // debug
    window.socket = socket
    window.game = game
    window.p1 = p1
    window.p2 = p2

  }

  gameState.update = function () {

    if(p1 && p2) {

      frameCount++

      if(p1.resetPlayback() || p2.resetPlayback()) {
        arena.sameTurn()
        frameCount = 0
      }

      if(frameCount === 1 && newTurn === true) {
        arena.cinematicPlayback()
        hasPlayedBack = true
      }

      if(frameCount === 100) {
        frameCount = 0

        if(newTurn === true && hasPlayedBack === true) {
          arena.newTurn()
          newTurn = false
          hasPlayedBack = false
          isSpacebarLocked = false
        } else {
          arena.sameTurn()
        }
      }

      if(game.input.keyboard.justPressed(Phaser.Keyboard.SPACEBAR)) {
        if(isP1 || isP2) {
          if(isSpacebarLocked === false) {
            console.log('SPACEBAR')
            var p = isP1 ? p1 : p2
            socket.emit('action', p.getLastTurn())
            console.log(p.getLastTurn())
            isSpacebarLocked = true
          }
        }
      }
    }
  }

  gameState.shutdown = function () {
    socket.emit('leave-lobby')
    arena.destroy()
  }

  return gameState
}
},{"../Arena.js":2,"../Button.js":3,"../Player.js":4}],13:[function(require,module,exports){
var Button = require('../Button.js')

module.exports = function(game) {

  var gameState = {}

  gameState.preload = function () {
    game.stage.disableVisibilityChange = true
  }

  gameState.create = function () {
    var backButton = new Button(game, { x: 100, y: 50, text: 'back' },
    function () {
      game.state.start('mainmenu')
    })
  }

  return gameState
}
},{"../Button.js":3}],14:[function(require,module,exports){
module.exports = function(game) {

  var gameState = {}

  gameState.preload = function () {
    game.stage.disableVisibilityChange = true
  }

  gameState.create = function () {

  	var style = { font: '40px Arial', fill: '#ffffff', align: 'center'}
  	var mainMenuButton = game.add.text(100, 50, 'back', style)
    mainMenuButton.anchor.setTo(0.5, 0.5)
    mainMenuButton.inputEnabled = true
    mainMenuButton.events.onInputDown.add(function() {
			game.state.start('mainmenu')
    })

  	var train = game.add.text(game.world.centerX, 300, 'train', style)
    train.anchor.setTo(0.5, 0.5)
    train.inputEnabled = true
    train.events.onInputDown.add(function() {
			game.state.start('train')
    })
  }

  return gameState
}

},{}],15:[function(require,module,exports){
var Player = require('../Player.js')
var Arena = require('../Arena.js')
var Button = require('../Button.js')

module.exports = function(game) {

  var gameState = {}

  var arena

  gameState.preload = function () {
    game.stage.disableVisibilityChange = true
  }

  gameState.create = function () {

    // back button
    var backButton = new Button(game, { x: 100, y: 50, text: 'back' },
    function () {
      game.state.start('singleplayermenu')
    })

    arena = new Arena(game)
    arena.createPlayers()
    arena.setControllers('me', 'dummy')
    arena.newTurn()
  }

  var frameCount = 0
  var newTurn = false
  var hasPlayedBack = false

  gameState.update = function () {

    frameCount++

    if(arena.players['p1'].resetPlayback() || arena.players['p2'].resetPlayback()) {
      frameCount = 0
      arena.sameTurn()
    }

    if(frameCount === 1 && newTurn === true) {
      arena.cinematicPlayback()
      hasPlayedBack = true
    }

    if(frameCount === 100) {
      frameCount = 0

      if(newTurn === true && hasPlayedBack === true) {
        arena.newTurn()
        newTurn = false
        hasPlayedBack = false
      } else {
        arena.sameTurn()
      }
    }

    if(game.input.keyboard.justPressed(Phaser.Keyboard.SPACEBAR)) {
      newTurn = true
    }
  }

  gameState.shutdown = function () {
    arena.destroy()
  }

  return gameState
}
},{"../Arena.js":2,"../Button.js":3,"../Player.js":4}],16:[function(require,module,exports){
(function (global){
;__browserify_shim_require__=require;(function browserifyShim(module, exports, require, define, browserify_shim__define__module__export__) {
// stats.js - http://github.com/mrdoob/stats.js
var Stats=function(){var l=Date.now(),m=l,g=0,n=Infinity,o=0,h=0,p=Infinity,q=0,r=0,s=0,f=document.createElement("div");f.id="stats";f.addEventListener("mousedown",function(b){b.preventDefault();t(++s%2)},!1);f.style.cssText="width:80px;opacity:0.9;cursor:pointer";var a=document.createElement("div");a.id="fps";a.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#002";f.appendChild(a);var i=document.createElement("div");i.id="fpsText";i.style.cssText="color:#0ff;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px";
i.innerHTML="FPS";a.appendChild(i);var c=document.createElement("div");c.id="fpsGraph";c.style.cssText="position:relative;width:74px;height:30px;background-color:#0ff";for(a.appendChild(c);74>c.children.length;){var j=document.createElement("span");j.style.cssText="width:1px;height:30px;float:left;background-color:#113";c.appendChild(j)}var d=document.createElement("div");d.id="ms";d.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#020;display:none";f.appendChild(d);var k=document.createElement("div");
k.id="msText";k.style.cssText="color:#0f0;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px";k.innerHTML="MS";d.appendChild(k);var e=document.createElement("div");e.id="msGraph";e.style.cssText="position:relative;width:74px;height:30px;background-color:#0f0";for(d.appendChild(e);74>e.children.length;)j=document.createElement("span"),j.style.cssText="width:1px;height:30px;float:left;background-color:#131",e.appendChild(j);var t=function(b){s=b;switch(s){case 0:a.style.display=
"block";d.style.display="none";break;case 1:a.style.display="none",d.style.display="block"}};return{REVISION:11,domElement:f,setMode:t,begin:function(){l=Date.now()},end:function(){var b=Date.now();g=b-l;n=Math.min(n,g);o=Math.max(o,g);k.textContent=g+" MS ("+n+"-"+o+")";var a=Math.min(30,30-30*(g/200));e.appendChild(e.firstChild).style.height=a+"px";r++;b>m+1E3&&(h=Math.round(1E3*r/(b-m)),p=Math.min(p,h),q=Math.max(q,h),i.textContent=h+" FPS ("+p+"-"+q+")",a=Math.min(30,30-30*(h/100)),c.appendChild(c.firstChild).style.height=
a+"px",m=b,r=0);return b},update:function(){l=this.end()}}};
; browserify_shim__define__module__export__(typeof Stats != "undefined" ? Stats : window.Stats);

}).call(global, undefined, undefined, undefined, undefined, function defineExport(ex) { module.exports = ex; });

}).call(this,typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}]},{},[6])
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL29saXZpZXIvRG9jdW1lbnRzL3Byb2dyYW1pbmcvZ2FtZXMvbmFtZWxlc3MtZ2FtZS9ub2RlX21vZHVsZXMvYnJvd3NlcmlmeS9ub2RlX21vZHVsZXMvYnJvd3Nlci1wYWNrL19wcmVsdWRlLmpzIiwiL2hvbWUvb2xpdmllci9Eb2N1bWVudHMvcHJvZ3JhbWluZy9nYW1lcy9uYW1lbGVzcy1nYW1lL3BhY2thZ2UuanNvbiIsIi9ob21lL29saXZpZXIvRG9jdW1lbnRzL3Byb2dyYW1pbmcvZ2FtZXMvbmFtZWxlc3MtZ2FtZS9zcmMvanMvZ2FtZS9BcmVuYS5qcyIsIi9ob21lL29saXZpZXIvRG9jdW1lbnRzL3Byb2dyYW1pbmcvZ2FtZXMvbmFtZWxlc3MtZ2FtZS9zcmMvanMvZ2FtZS9CdXR0b24uanMiLCIvaG9tZS9vbGl2aWVyL0RvY3VtZW50cy9wcm9ncmFtaW5nL2dhbWVzL25hbWVsZXNzLWdhbWUvc3JjL2pzL2dhbWUvUGxheWVyLmpzIiwiL2hvbWUvb2xpdmllci9Eb2N1bWVudHMvcHJvZ3JhbWluZy9nYW1lcy9uYW1lbGVzcy1nYW1lL3NyYy9qcy9nYW1lL1JhZ2RvbGwuanMiLCIvaG9tZS9vbGl2aWVyL0RvY3VtZW50cy9wcm9ncmFtaW5nL2dhbWVzL25hbWVsZXNzLWdhbWUvc3JjL2pzL2dhbWUvYXBwLmpzIiwiL2hvbWUvb2xpdmllci9Eb2N1bWVudHMvcHJvZ3JhbWluZy9nYW1lcy9uYW1lbGVzcy1nYW1lL3NyYy9qcy9nYW1lL3Byb3BlcnRpZXMuanMiLCIvaG9tZS9vbGl2aWVyL0RvY3VtZW50cy9wcm9ncmFtaW5nL2dhbWVzL25hbWVsZXNzLWdhbWUvc3JjL2pzL2dhbWUvc3RhdGVzL2Jvb3QuanMiLCIvaG9tZS9vbGl2aWVyL0RvY3VtZW50cy9wcm9ncmFtaW5nL2dhbWVzL25hbWVsZXNzLWdhbWUvc3JjL2pzL2dhbWUvc3RhdGVzL21haW5tZW51LmpzIiwiL2hvbWUvb2xpdmllci9Eb2N1bWVudHMvcHJvZ3JhbWluZy9nYW1lcy9uYW1lbGVzcy1nYW1lL3NyYy9qcy9nYW1lL3N0YXRlcy9tdWx0aXBsYXllcm1lbnUuanMiLCIvaG9tZS9vbGl2aWVyL0RvY3VtZW50cy9wcm9ncmFtaW5nL2dhbWVzL25hbWVsZXNzLWdhbWUvc3JjL2pzL2dhbWUvc3RhdGVzL3ByZWxvYWRlci5qcyIsIi9ob21lL29saXZpZXIvRG9jdW1lbnRzL3Byb2dyYW1pbmcvZ2FtZXMvbmFtZWxlc3MtZ2FtZS9zcmMvanMvZ2FtZS9zdGF0ZXMvcXVpY2ttYXRjaC5qcyIsIi9ob21lL29saXZpZXIvRG9jdW1lbnRzL3Byb2dyYW1pbmcvZ2FtZXMvbmFtZWxlc3MtZ2FtZS9zcmMvanMvZ2FtZS9zdGF0ZXMvc2V0dGluZ3NtZW51LmpzIiwiL2hvbWUvb2xpdmllci9Eb2N1bWVudHMvcHJvZ3JhbWluZy9nYW1lcy9uYW1lbGVzcy1nYW1lL3NyYy9qcy9nYW1lL3N0YXRlcy9zaW5nbGVwbGF5ZXJtZW51LmpzIiwiL2hvbWUvb2xpdmllci9Eb2N1bWVudHMvcHJvZ3JhbWluZy9nYW1lcy9uYW1lbGVzcy1nYW1lL3NyYy9qcy9nYW1lL3N0YXRlcy90cmFpbi5qcyIsIi9ob21lL29saXZpZXIvRG9jdW1lbnRzL3Byb2dyYW1pbmcvZ2FtZXMvbmFtZWxlc3MtZ2FtZS9zcmMvanMvbGliL3N0YXRzLm1pbi5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ25EQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3RIQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzVCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDL1hBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN0VUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMvQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDckJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN0Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNyQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN6QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNuQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzdLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNsQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM1QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3BFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpfXZhciBmPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChmLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGYsZi5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJtb2R1bGUuZXhwb3J0cz17XG4gIFwibmFtZVwiOiBcIm5hbWVsZXNzLWdhbWVcIixcbiAgXCJ2ZXJzaW9uXCI6IFwiMC4xLjBcIixcbiAgXCJkZXNjcmlwdGlvblwiOiBcIm5hbWVsZXNzXCIsXG4gIFwibWFpblwiOiBcImJ1aWxkL2pzL2FwcC5taW4uanNcIixcbiAgXCJzY3JpcHRzXCI6IHtcbiAgICBcInRlc3RcIjogXCJlY2hvIFxcXCJFcnJvcjogbm8gdGVzdCBzcGVjaWZpZWRcXFwiICYmIGV4aXQgMVwiXG4gIH0sXG4gIFwicmVwb3NpdG9yeVwiOiB7XG4gICAgXCJ0eXBlXCI6IFwiZ2l0XCIsXG4gICAgXCJ1cmxcIjogXCJnaXRAZ2l0aHViLmNvbTpvbGl2aWVycnIvbmFtZWxlc3MtZ2FtZS5naXRcIlxuICB9LFxuICBcImF1dGhvclwiOiBcIm9saXZpZXJyclwiLFxuICBcImxpY2Vuc2VcIjogXCJNSVRcIixcbiAgXCJicm93c2VyXCI6IHtcbiAgICBcImxvZGFzaFwiOiBcIi4vbm9kZV9tb2R1bGVzL2xvZGFzaC9kaXN0L2xvZGFzaC5jb21wYXQuanNcIixcbiAgICBcIlN0YXRzXCI6IFwiLi9zcmMvanMvbGliL3N0YXRzLm1pbi5qc1wiXG4gIH0sXG4gIFwiYnJvd3NlcmlmeS1zaGltXCI6IHtcbiAgICBcImxvZGFzaFwiOiB7XG4gICAgICBcImV4cG9ydHNcIjogXCJfXCJcbiAgICB9LFxuICAgIFwiU3RhdHNcIjoge1xuICAgICAgXCJleHBvcnRzXCI6IFwiU3RhdHNcIlxuICAgIH1cbiAgfSxcbiAgXCJkZXZEZXBlbmRlbmNpZXNcIjoge1xuICAgIFwiYnJvd3NlcmlmeVwiOiBcIl40LjEuNVwiLFxuICAgIFwiYnJvd3NlcmlmeS1zaGltXCI6IFwiXjMuNS4wXCIsXG4gICAgXCJncnVudFwiOiBcIl4wLjQuNVwiLFxuICAgIFwiZ3J1bnQtYnJvd3NlcmlmeVwiOiBcIl4yLjEuMFwiLFxuICAgIFwiZ3J1bnQtY2FjaGUtYnVzdFwiOiBcIl4wLjMuNlwiLFxuICAgIFwiZ3J1bnQtY29udHJpYi1jbGVhblwiOiBcIl4wLjUuMFwiLFxuICAgIFwiZ3J1bnQtY29udHJpYi1jb25uZWN0XCI6IFwiXjAuNy4xXCIsXG4gICAgXCJncnVudC1jb250cmliLWNvcHlcIjogXCJeMC41LjBcIixcbiAgICBcImdydW50LWNvbnRyaWItamFkZVwiOiBcIl4wLjExLjBcIixcbiAgICBcImdydW50LWNvbnRyaWItanNoaW50XCI6IFwiXjAuMTAuMFwiLFxuICAgIFwiZ3J1bnQtY29udHJpYi1zdHlsdXNcIjogXCJeMC4xNi4wXCIsXG4gICAgXCJncnVudC1jb250cmliLXVnbGlmeVwiOiBcIl4wLjQuMFwiLFxuICAgIFwiZ3J1bnQtY29udHJpYi13YXRjaFwiOiBcIl4wLjYuMVwiLFxuICAgIFwiZ3J1bnQtb3BlblwiOiBcIl4wLjIuM1wiLFxuICAgIFwiZ3J1bnQtcG5nbWluXCI6IFwiXjAuNi4xXCJcbiAgfSxcbiAgXCJkZXBlbmRlbmNpZXNcIjoge1xuICAgIFwiZ3J1bnQtY29udHJpYi1jb21wcmVzc1wiOiBcIl4wLjkuMVwiLFxuICAgIFwibG9kYXNoXCI6IFwiXjIuNC4xXCIsXG4gICAgXCJub2RlLXN0YXRpY1wiOiBcIl4wLjcuNlwiLFxuICAgIFwicGhhc2VyXCI6IFwiXjIuMS4xXCIsXG4gICAgXCJzb2NrZXQuaW9cIjogXCJeMS4xLjBcIlxuICB9XG59XG4iLCJcbnZhciBQbGF5ZXIgPSByZXF1aXJlKCcuL1BsYXllcicpXG5cbi8qXG4gKiBBcmVuYSBjbGFzc1xuICpcbiAqIEBjb25zdHJ1Y3RvciBBcmVuYVxuICovXG52YXIgQXJlbmEgPSBmdW5jdGlvbiAoZ2FtZSkge1xuXG5cdC8qXG5cdCAqIEByZWZlcmVuY2Uge1BoYXNlci5nYW1lfSBnYW1lXG5cdCAqL1xuXHR0aGlzLmdhbWUgPSBnYW1lXG5cblx0Lypcblx0ICogQHJlZmVyZW5jZXMge1BsYXllcn1cblx0ICovXG5cdHRoaXMucGxheWVycyA9IHt9XG5cblx0dGhpcy5pbml0KClcblxuXHRyZXR1cm4gdGhpc1xufVxuXG4vKlxuICogQG1ldGhvZCBpbml0XG4gKi9cbkFyZW5hLnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24oKSB7XG5cdHRoaXMuZ2FtZS5waHlzaWNzLnN0YXJ0U3lzdGVtKFBoYXNlci5QaHlzaWNzLlAySlMpXG5cbiAgdGhpcy5nYW1lLnBoeXNpY3MucDIuZ3Jhdml0eS55ID0gODAwXG5cbiAgdGhpcy5nYW1lLnBoeXNpY3MucDIud29ybGQuc29sdmVyLml0ZXJhdGlvbnMgPSAxMDAwXG4gIHRoaXMuZ2FtZS5waHlzaWNzLnAyLndvcmxkLnNvbHZlci5mcmljdGlvbkl0ZXJhdGlvbnMgPSAxMDAwXG5cbiAgdGhpcy5nYW1lLnBoeXNpY3Mud2FsbE1hdGVyaWFsID0gdGhpcy5nYW1lLnBoeXNpY3MucDIuY3JlYXRlTWF0ZXJpYWwoJ3dhbGxNYXRlcmlhbCcpXG4gIHRoaXMuZ2FtZS5waHlzaWNzLnAyLnNldFdvcmxkTWF0ZXJpYWwodGhpcy5nYW1lLnBoeXNpY3Mud2FsbE1hdGVyaWFsLCB0cnVlLCB0cnVlLCB0cnVlLCB0cnVlKVxuXG4gIC8vIFR1cm4gb24gaW1wYWN0IGV2ZW50cyBmb3IgdGhlIHdvcmxkLCB3aXRob3V0IHRoaXMgd2UgZ2V0IG5vIGNvbGxpc2lvbiBjYWxsYmFja3NcbiAgdGhpcy5nYW1lLnBoeXNpY3MucDIuc2V0SW1wYWN0RXZlbnRzKHRydWUpXG5cbiAgLy8gZGVidWdcbiAgd2luZG93LlAyID0gdGhpcy5nYW1lLnBoeXNpY3MucDJcbn1cblxuLypcbiAqIEBtZXRob2RcbiAqL1xuQXJlbmEucHJvdG90eXBlLmNyZWF0ZVBsYXllcnMgPSBmdW5jdGlvbiAoKSB7XG5cdHRoaXMucGxheWVyc1sncDEnXSA9IG5ldyBQbGF5ZXIodGhpcy5nYW1lLCAyMDAsIDIwMClcblx0dGhpcy5wbGF5ZXJzWydwMiddID0gbmV3IFBsYXllcih0aGlzLmdhbWUsIDYwMCwgMjAwKVxufVxuXG4vKlxuICogQG1ldGhvZFxuICovXG5BcmVuYS5wcm90b3R5cGUucmVzZXRQbGF5ZXJzID0gZnVuY3Rpb24gKCkge1xuXHR0aGlzLmZvckVhY2hQbGF5ZXIoZnVuY3Rpb24gKHApIHtcblx0XHRwLnJlc2V0KClcblx0fSlcbn1cblxuLypcbiAqIEBtZXRob2RcbiAqL1xuQXJlbmEucHJvdG90eXBlLnNldENvbnRyb2xsZXJzID0gZnVuY3Rpb24gKHAxLCBwMikge1xuXHR0aGlzLnBsYXllcnNbJ3AxJ10uc2V0Q29udHJvbGxlcihwMSB8fCAnZHVtbXknKVxuXHR0aGlzLnBsYXllcnNbJ3AyJ10uc2V0Q29udHJvbGxlcihwMiB8fCAnZHVtbXknKVxufVxuXG4vKlxuICogbXVsdGkgcHVycG9zZSBwbGF5ZXIgaXRlcmF0b3JcbiAqXG4gKiBAbWV0aG9kXG4gKi9cbkFyZW5hLnByb3RvdHlwZS5mb3JFYWNoUGxheWVyID0gZnVuY3Rpb24gKGNiKSB7XG5cdHZhciBwbGF5ZXJzID0gdGhpcy5wbGF5ZXJzXG5cdE9iamVjdC5rZXlzKHBsYXllcnMpLmZvckVhY2goZnVuY3Rpb24gKHApIHsgY2IocGxheWVyc1twXSkgfSlcbn1cblxuLypcbiAqIEBtZXRob2RcbiAqL1xuQXJlbmEucHJvdG90eXBlLm5ld1R1cm4gPSBmdW5jdGlvbiAoKSB7XG5cdHRoaXMuZm9yRWFjaFBsYXllcihmdW5jdGlvbiAocCkge1xuXHRcdHAubWV0aG9kMSgpXG5cdH0pXG59XG5cbi8qXG4gKiBAbWV0aG9kXG4gKi9cbkFyZW5hLnByb3RvdHlwZS5zYW1lVHVybiA9IGZ1bmN0aW9uICgpIHtcblx0dGhpcy5mb3JFYWNoUGxheWVyKGZ1bmN0aW9uIChwKSB7XG5cdFx0cC5tZXRob2QyKClcblx0fSlcbn1cblxuLypcbiAqIEBtZXRob2RcbiAqL1xuQXJlbmEucHJvdG90eXBlLmNpbmVtYXRpY1BsYXliYWNrID0gZnVuY3Rpb24gKCkge1xuXHR0aGlzLmZvckVhY2hQbGF5ZXIoZnVuY3Rpb24gKHApIHtcblx0XHRwLmNpbmVtYXRpY0V4ZWN1dGVNb3ZlcygpXG5cdH0pXG59XG5cbi8qXG4gKiBAbWV0aG9kIGRlc3Ryb3lcbiAqL1xuQXJlbmEucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG5cdHRoaXMuZm9yRWFjaFBsYXllcihmdW5jdGlvbiAocCkgeyBcblx0XHRwLmRlc3Ryb3koKSBcblx0fSlcblx0dGhpcy5nYW1lLnBoeXNpY3MuZGVzdHJveSgpXG59XG5cbm1vZHVsZS5leHBvcnRzID0gQXJlbmEiLCJcbi8qXG4gKiBCdXR0b24gY2xhc3NcbiAqXG4gKiBAY29uc3RydWN0b3IgQnV0dG9uXG4gKi9cbnZhciBCdXR0b24gPSBmdW5jdGlvbiAoZ2FtZSwgc2V0dGluZ3MsIGNiKSB7XG5cblx0dmFyIHggPSBzZXR0aW5ncy54IFx0XHRcdHx8IDEwMFxuXHR2YXIgeSA9IHNldHRpbmdzLnkgXHRcdFx0fHwgMTAwXG5cdHZhciB0ZXh0ID0gc2V0dGluZ3MudGV4dCBcdHx8ICdidXR0b24nXG5cdHZhciBmb250ID0gc2V0dGluZ3MuZm9udCBcdHx8ICc0MHB4IEFyaWFsJ1xuXHR2YXIgZmlsbCA9IHNldHRpbmdzLmZpbGwgXHR8fCAnI2ZmZmZmZidcblx0dmFyIGFsaWduID0gc2V0dGluZ3MuYWxpZ25cdHx8ICdjZW50ZXInXG5cblx0aWYoc2V0dGluZ3Muc3ByaXRlKSB7XG5cdFx0Y29uc29sZS5sb2coJ3RvZG8nKVxuXHRcdC8vXHR0b2RvIC0gc3ByaXRlIGJhY2tncm91bmRcblx0fVxuXG4gIHRoaXMuYnRuID0gZ2FtZS5hZGQudGV4dCh4LCB5LCB0ZXh0LCB7IGZvbnQ6IGZvbnQsIGZpbGw6IGZpbGwsIGFsaWduOiBhbGlnbiB9IClcblxuICB0aGlzLmJ0bi5hbmNob3Iuc2V0VG8oMC41LCAwLjUpXG4gIHRoaXMuYnRuLmlucHV0RW5hYmxlZCA9IHRydWVcblxuICB0aGlzLmJ0bi5ldmVudHMub25JbnB1dERvd24uYWRkKGZ1bmN0aW9uKCkgeyBjYigpIH0pXG59XG5cbm1vZHVsZS5leHBvcnRzID0gQnV0dG9uIiwidmFyIFJhZ2RvbGwgPSByZXF1aXJlKCcuL1JhZ2RvbGwuanMnKVxuXG4vKlxuICogUGxheWVyIGNsYXNzXG4gKlxuICogQGV4dGVuZHMgUmFnZG9sbFxuICogQGNvbnN0cnVjdG9yIFBsYXllclxuICovXG52YXIgUGxheWVyID0gZnVuY3Rpb24gKGdhbWUsIHgsIHkpIHtcblxuICAvKipcbiAgICogYXZhaWxhYmxlIGNvbnRyb2xsZXJzOiBcbiAgICogICdtZScgICAgICAtIGNvbnRyb2xsZWQgYnkgdXNlcnMgaW5wdXRcbiAgICogICdkdW1teScgICAtIG5vIGNvbnJvbGxlclxuICAgKiAgJ25ldHdvcmsnIC0gY29udHJvbGxlciBvdmVyIG5ldHdvcmtcbiAgICpcbiAgICogQHByb3BlcnR5IHtTdHJpbmd9IGNvbnRyb2xsZXJcbiAgICogQGRlZmF1bHQgJ2R1bW15J1xuICAgKi9cbiAgdGhpcy5jb250cm9sbGVyID0gJ2R1bW15J1xuXG5cdC8qKlxuXHQgKiBAcmVmZXJlbmNlIHtQaGFzZXIuZ2FtZX0gZ2FtZVxuXHQgKi9cblx0dGhpcy5nYW1lID0gZ2FtZVxuXG5cdC8qKlxuIFx0ICogQE9iamVjdCB7UGhhc2VyLmdyb3VwfSByYWdkb2xsXG5cdCAqL1xuXHR0aGlzLnJhZ2RvbGwgPSBSYWdkb2xsKGdhbWUsIHgsIHkpXG5cblx0LyoqIFxuICAgKiBAcHJvcGVydHkge0Jvb2xlbn0gaXNBbGxvd2luZ0lucHV0XG4gICAqL1xuICB0aGlzLmlzQWxsb3dpbmdJbnB1dCA9IHRydWVcblxuICAvKipcbiAgICogYSB0dXJuIGlzIGFuIEFycmF5IG9mIGFjdGlvbnNcbiAgICogYW4gJ2FjdGlvbicgaXMgYSBqb2ludCBldmVudCAtIGV4OiB7am9pbnROYW1lOiduZWNrJywgdHlwZToncmVsYXgnfVxuICAgKlxuICAgKiBAcHJvcGVydHkge0FycmF5fSB0dXJuSGlzdG9yeVxuICAgKi9cbiAgdGhpcy50dXJuSGlzdG9yeSA9IFtdXG5cbiAgLyoqXG4gICAqIEBwcm9wZXJ0eSB7QXJyYXl9IGN1cnJlbnRQb3NpdGlvblxuICAgKi9cbiAgdGhpcy5jdXJyZW50UG9zaXRpb24gPSBbXVxuXG4gIC8qKlxuICAgKiBAcHJvcGVydHkge0FycmF5fSBjdXJyZW50UG9zaXRpb25cbiAgICovXG4gIHRoaXMuaW5pdGlhbFBvc2l0aW9uID0gW11cblxuICAvKipcbiAgICogQHByb3BlcnR5IHtOdW1iZXJ9IGhlYWx0aFxuICAgKi9cbiAgdGhpcy5oZWFsdGggPSAxMDBcblxuICAvKipcbiAgICogcmVxdWVzdCBhbiBhbmltYXRpb24gcGxheWJhY2tcbiAgICpcbiAgICogQHByb3BlcnR5IHtCb29sZWFufSBpc1Jlc2V0aW5nUGxheWJhY2tcbiAgICovXG4gIHRoaXMuaXNSZXNldGluZ1BsYXliYWNrID0gZmFsc2VcblxuICB0aGlzLnNhdmVQb3NpdGlvbigpXG4gIHRoaXMuaW5pdGlhbFBvc2l0aW9uID0gdGhpcy5jdXJyZW50UG9zaXRpb24gXG59XG5cbi8qKlxuICogcHVzaGVzIGFuIGVtcHR5IHR1cm4gT2JqZWN0IHRvIHR1cm5IaXN0b3J5XG4gKiByYWdkb2xsLm5ld0FjdGlvbiB3aWxsIHB1c2ggbW92ZXMgdG8gbmV3bHkgcHVzaGVkIE9iamVjdFxuICpcbiAqIEBtZXRob2QgbmV3VHVyblxuICovXG5QbGF5ZXIucHJvdG90eXBlLm5ld1R1cm4gPSBmdW5jdGlvbiAoKSB7XG4gIHRoaXMudHVybkhpc3RvcnkucHVzaCh7fSlcblxuICAvLyB0aGlzIHNob3VsZG4ndCBiZSBoZXJlXG4gIHRoaXMucmFnZG9sbC5jaGlsZHJlbi5mb3JFYWNoKGZ1bmN0aW9uIChwYXJ0KSB7XG4gICAgcGFydC5sb2FkVGV4dHVyZSgnd2hpdGVzcXVhcmUnKVxuICB9KVxufVxuXG4vKipcbiAqIHJlZ2lzdGVyIGEgbmV3IG1vdmUgdG8gbGF0ZXN0IHR1cm4gb24gdHVybkhpc3RvcnlcbiAqXG4gKiBAbWV0aG9kIG5ld0FjdGlvblxuICogQHBhcmFtIHtPYmplY3R9IG1vdmVcbiAqL1xuUGxheWVyLnByb3RvdHlwZS5uZXdBY3Rpb24gPSBmdW5jdGlvbiAobW92ZSkge1xuICB0aGlzLnR1cm5IaXN0b3J5W3RoaXMudHVybkhpc3RvcnkubGVuZ3RoLTFdW21vdmUuam9pbnROYW1lXSA9IG1vdmUudHlwZVxufVxuXG4vKipcbiAqIHNhdmUgY3VycmVudCBwb3NpdGlvbiBhbmQgdmVsb2NpdHlcbiAqIFxuICogQG1ldGhvZCBzYXZlUG9zaXRpb25cbiovXG5QbGF5ZXIucHJvdG90eXBlLnNhdmVQb3NpdGlvbiA9IGZ1bmN0aW9uICgpIHtcblxuICB0aGlzLmN1cnJlbnRQb3NpdGlvbiA9IHRoaXMucmFnZG9sbC5jaGlsZHJlbi5tYXAoIGZ1bmN0aW9uIChwYXJ0KSB7XG4gICAgdmFyIGRhdGEgPSBwYXJ0LmJvZHkuZGF0YVxuICAgIHJldHVybiB7XG4gICAgICB4OiBkYXRhLnBvc2l0aW9uWzBdLCBcbiAgICAgIHk6IGRhdGEucG9zaXRpb25bMV0sXG4gICAgICB2eDogZGF0YS52ZWxvY2l0eVswXSxcbiAgICAgIHZ5OiBkYXRhLnZlbG9jaXR5WzFdLFxuICAgICAgYW5nbGU6IGRhdGEuYW5nbGUsXG4gICAgICBhbmd1bGFyVmVsb2NpdHk6IGRhdGEuYW5ndWxhclZlbG9jaXR5LFxuICAgICAgd2xhbWJkYTogZGF0YS53bGFtYmRhLFxuICAgICAgdmxhbWJkYXggOiBkYXRhLnZsYW1iZGFbMF0sXG4gICAgICB2bGFtYmRheSA6IGRhdGEudmxhbWJkYVsxXVxuICAgIH1cbiAgfSlcbn1cblxuLyoqXG4gKiBtb3ZlIHJhZ2RvbGwgdG8gbGFzdCBwb3NpdGlvbiBvbiBwb3N0aXNpb24gaGlzdG9yeVxuICogXG4gKiBAbWV0aG9kIGxvYWRQb3NpdGlvblxuICovXG5QbGF5ZXIucHJvdG90eXBlLmxvYWRQb3NpdGlvbiA9IGZ1bmN0aW9uICgpIHtcblxuICB2YXIgcG9zID0gdGhpcy5jdXJyZW50UG9zaXRpb25cbiAgdGhpcy5yYWdkb2xsLmNoaWxkcmVuLmZvckVhY2goZnVuY3Rpb24ocGFydCwgaSkge1xuICAgIHZhciBkYXRhID0gcGFydC5ib2R5LmRhdGFcbiAgICBkYXRhLnBvc2l0aW9uWzBdID0gcG9zW2ldLnhcbiAgICBkYXRhLnBvc2l0aW9uWzFdID0gcG9zW2ldLnlcbiAgICBkYXRhLmFuZ2xlID0gcG9zW2ldLmFuZ2xlLFxuICAgIGRhdGEuYW5ndWxhclZlbG9jaXR5ID0gcG9zW2ldLmFuZ3VsYXJWZWxvY2l0eSxcbiAgICBkYXRhLnZlbG9jaXR5WzBdID0gcG9zW2ldLnZ4LFxuICAgIGRhdGEudmVsb2NpdHlbMV0gPSBwb3NbaV0udnksXG4gICAgZGF0YS53bGFtYmRhID0gcG9zW2ldLndsYW1iZGEsXG4gICAgZGF0YS52bGFtYmRhWzBdID0gcG9zW2ldLnZsYW1iZGF4LFxuICAgIGRhdGEudmxhbWJkYVsxXSA9IHBvc1tpXS52bGFtYmRheVxuICB9KVxufVxuXG4vKipcbiAqIGNyZWF0ZSBzaGFsbG93IGNvcHkgb2YgcmFnZG9sbHMgcG9zaXRpb25cbiAqXG4gKiBAbWV0aG9kIGNsb25lXG4gKiBAcmV0dXJuIHtQaGFzZXIuR3JvdXB9XG4qL1xuUGxheWVyLnByb3RvdHlwZS5jbG9uZSA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIHJhZ2RvbGxDbG9uZSA9IHRoaXMuZ2FtZS5hZGQuZ3JvdXAoKVxuXG4gIHRoaXMucmFnZG9sbC5jaGlsZHJlbi5mb3JFYWNoKGZ1bmN0aW9uKHBhcnQpIHtcbiAgICB2YXIgY2xvbmUgPSByYWdkb2xsQ2xvbmUuY3JlYXRlKHBhcnQucG9zaXRpb24ueCwgcGFydC5wb3NpdGlvbi55LCBwYXJ0LmtleSlcbiAgICBjbG9uZS53aWR0aCA9IHBhcnQud2lkdGhcbiAgICBjbG9uZS5oZWlnaHQgPSBwYXJ0LmhlaWdodFxuICAgIGNsb25lLnJvdGF0aW9uID0gcGFydC5yb3RhdGlvblxuICAgIGNsb25lLmFuY2hvci54ID0gcGFydC5hbmNob3IueFxuICAgIGNsb25lLmFuY2hvci55ID0gcGFydC5hbmNob3IueVxuICAgIGNsb25lLm5hbWUgPSBwYXJ0Lm5hbWVcbiAgfSlcblxuICByZXR1cm4gcmFnZG9sbENsb25lXG59XG5cbi8qXG4gKiBAbWV0aG9kIHNldExhc3RUdXJuXG4gKi9cblBsYXllci5wcm90b3R5cGUuc2V0TGFzdFR1cm4gPSBmdW5jdGlvbiAodHVybikge1xuICB0aGlzLnR1cm5IaXN0b3J5W3RoaXMudHVybkhpc3RvcnkubGVuZ3RoLTFdID0gdHVyblxufVxuXG4vKipcbiAqIEBtZXRob2QgZ2V0TGFzdFR1cm5cbiAqL1xuUGxheWVyLnByb3RvdHlwZS5nZXRMYXN0VHVybiA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHRoaXMudHVybkhpc3RvcnlbdGhpcy50dXJuSGlzdG9yeS5sZW5ndGgtMV1cbn1cblxuLyoqXG4gKiBzaW5nbGV0b24gY2xvbmVcbiAqXG4gKiB0b2RvIC0gY291bGQgYmUgZm9yY2luZyBwb3NpdGlvbiBvbiBwcmV2aW91c2x5IG1hZGUgY2xvbmUgaW5zdGVhZCBvZiBkZXN0cm95aW5nIGFuZCBjcmVhdGluZyBuZXcgaW5zdGFuY2UgXG4gKlxuICogQG1ldGhvZCBzaGFkb3dcbiAqL1xuUGxheWVyLnByb3RvdHlwZS5zaGFkb3cgPSBmdW5jdGlvbiAoKSB7XG5cbiAgdGhpcy5kZXN0cm95U2hhZG93KClcblxuICB0aGlzLnNoYWRvd0Nsb25lID0gdGhpcy5jbG9uZSgpXG4gIFxuICAvLyBUT0RPXG4gIGF0dGFjaEV2ZW50cyh0aGlzLnNoYWRvd0Nsb25lLCB0aGlzKVxufVxuXG4vKipcbiAqIEBtZXRob2QgZGVzdHJveVNoYWRvd1xuICovXG5QbGF5ZXIucHJvdG90eXBlLmRlc3Ryb3lTaGFkb3cgPSBmdW5jdGlvbigpIHtcbiAgaWYodGhpcy5zaGFkb3dDbG9uZSkgdGhpcy5zaGFkb3dDbG9uZS5kZXN0cm95KClcbn1cblxuLyoqXG4gKiBtb3ZlIHJhZ2RvbGxcbiAqXG4gKiBAbWV0aG9kIGV4ZWN1dGVNb3ZlXG4gKiBAcGFyYW0ge1N0cmluZ30gam9pbnROYW1lXG4gKiBAcGFyYW0ge1N0cmluZ30gdHlwZVxuICovXG5QbGF5ZXIucHJvdG90eXBlLmV4ZWN1dGVNb3ZlID0gZnVuY3Rpb24gKGpvaW50TmFtZSwgdHlwZSkge1xuICBzd2l0Y2ggKHR5cGUpIHtcbiAgICBjYXNlICdleHBhbmQnICA6IHRoaXMucmFnZG9sbC5mbGV4KGpvaW50TmFtZSkgICAgIDticmVha1xuICAgIGNhc2UgJ2NvbnRyYWN0JzogdGhpcy5yYWdkb2xsLmNvbnRyYWN0KGpvaW50TmFtZSkgO2JyZWFrXG4gICAgY2FzZSAncmVsYXgnICAgOiB0aGlzLnJhZ2RvbGwucmVsYXgoam9pbnROYW1lKSAgICA7YnJlYWtcbiAgICBjYXNlICd0ZW5zZScgICA6IHRoaXMucmFnZG9sbC50ZW5zZShqb2ludE5hbWUpICAgIDticmVha1xuICB9XG59XG5cbi8qKlxuICogYSB0dXJuIGlzIGFuIGFycmF5IG9mIG1vdmVzXG4gKlxuICogQG1ldGhvZCBleGVjdXRlTW92ZXNcbiAqIEBwYXJhbSB7QXJyYXl9IHR1cm5cbiAqL1xuUGxheWVyLnByb3RvdHlwZS5leGVjdXRlTW92ZXMgPSBmdW5jdGlvbiAodHVybiwgYWxwaGEpIHtcbiAgdmFyIF90aGlzID0gdGhpc1xuXG4gIF90aGlzLnJhZ2RvbGwuYWxwaGEgPSBhbHBoYSB8fCAxIFxuXG4gIE9iamVjdC5rZXlzKHR1cm4pLmZvckVhY2goZnVuY3Rpb24gKGpvaW50TmFtZSkge1xuICAgIF90aGlzLmV4ZWN1dGVNb3ZlKGpvaW50TmFtZSwgdHVybltqb2ludE5hbWVdKVxuICB9KVxufVxuXG4vKipcbiAqIEBtZXRob2QgY2luZW1hdGljRXhlY3V0ZU1vdmVzXG4gKi9cblBsYXllci5wcm90b3R5cGUuY2luZW1hdGljRXhlY3V0ZU1vdmVzID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLmRlc3Ryb3lTaGFkb3coKVxuICB0aGlzLmV4ZWN1dGVNb3Zlcyh0aGlzLmdldExhc3RUdXJuKCksIDEpXG59XG5cbi8qKlxuICogd29ya3MgbGlrZSBub2RlcyBFdmVudEVtaXR0ZXIub25jZSBmb3IgQHByb3BlcnR5IGlzUmVzZXRpbmdQbGF5YmFja1xuICpcbiAqIEBtZXRob2QgcmVzZXRQbGF5YmFja1xuICovXG5QbGF5ZXIucHJvdG90eXBlLnJlc2V0UGxheWJhY2sgPSBmdW5jdGlvbiAoKSB7XG4gIGlmKHRoaXMuaXNSZXNldGluZ1BsYXliYWNrID09PSB0cnVlKSB7XG4gICAgdGhpcy5pc1Jlc2V0aW5nUGxheWJhY2sgPSBmYWxzZVxuICAgIHJldHVybiB0cnVlXG4gIH1cbiAgZWxzZSByZXR1cm4gZmFsc2Vcbn1cblxuLyoqXG4gKiBzaGltIHAyLm9uQmVnaW5Db250YWN0IHRvIHdvcmsgb24gUGhhc2VyLmdyb3VwIEByYWdkb2xsXG4gKlxuICogQG1ldGhvZCBvbkNvbGxpc2lvblxuICovXG5QbGF5ZXIucHJvdG90eXBlLm9uQ29sbGlzaW9uID0gZnVuY3Rpb24gKGNiKSB7XG4gIHRoaXMucmFnZG9sbC5jaGlsZHJlbi5mb3JFYWNoKGZ1bmN0aW9uIChwYXJ0KSB7XG4gICAgcGFydC5ib2R5Lm9uQmVnaW5Db250YWN0LmFkZChmdW5jdGlvbiAoYSwgYiwgYywgZCkge1xuICAgICAgY2IoYSwgYiwgYywgZClcbiAgICB9KVxuICB9KVxufVxuXG4vKipcbiAqIHJlc2V0IGJhY2sgdG8gaW5pdGlhbCBpbnN0YW5jZSBwb3NpdGlvblxuICpcbiAqIEBtZXRob2QgcmVzZXRcbiAqL1xuUGxheWVyLnByb3RvdHlwZS5yZXNldCA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLnR1cm5IaXN0b3J5ID0gW11cbiAgdGhpcy5jdXJyZW50UG9zaXRpb24gPSB0aGlzLmluaXRpYWxQb3NpdGlvblxuICB0aGlzLmxvYWRQb3NpdGlvbigpXG4gIHRoaXMuZGVzdHJveVNoYWRvdygpXG59XG5cbi8qKlxuICogQG1ldGhvZCBkZXN0cm95XG4gKi9cblBsYXllci5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uKCkge1xuICBpZih0aGlzLnNoYWRvd0Nsb25lKSB0aGlzLnNoYWRvd0Nsb25lLmRlc3Ryb3koKVxuICB0aGlzLnJhZ2RvbGwuZGVzdHJveSgpXG4gIHRoaXMudHVybkhpc3RvcnkgPSBudWxsXG4gIHRoaXMuY3VycmVudFBvc2l0aW9uID0gbnVsbFxuICB0aGlzLmluaXRpYWxQb3NpdGlvbiA9IG51bGxcbn1cblxuLy8vLyBUT0RPIC8vLy9cblxuLy8gVEVNUCAtIFRPRE9cbmZ1bmN0aW9uIGF0dGFjaEV2ZW50cyAocmFnZG9sbCwgY3R4KSB7XG5cdHJhZ2RvbGwuY2hpbGRyZW4uZm9yRWFjaChmdW5jdGlvbihwYXJ0KXtcbiAgICBwYXJ0LmlucHV0RW5hYmxlZCA9IHRydWVcbiAgICBwYXJ0LmV2ZW50cy5vbklucHV0RG93bi5hZGQoZnVuY3Rpb24oZSkge1xuICAgICAgbXVzY2xlQ2xpY2suY2FsbChjdHgsIGUubmFtZSlcbiAgICB9KVxuICB9KVxufVxuXG4vLyBURU1QIC0gVE9ET1xuZnVuY3Rpb24gbXVzY2xlQ2xpY2sgKG11c2NsZU5hbWUpIHtcblxuICBpZih0aGlzLmlzQWxsb3dpbmdJbnB1dCA9PT0gZmFsc2UpIHJldHVyblxuXG4gIC8vaWYobXVzY2xlTmFtZSA9PT0gJ3VwcGVyQm9keScpIHJldHVyblxuICAvL2lmKG11c2NsZU5hbWUgPT09ICdwZWx2aXMnKSByZXR1cm5cblxuICBqb2ludCA9IHtcbiAgICAnaGVhZCcgICAgICAgICA6ICduZWNrSm9pbnQnLFxuICAgICd1cHBlckxlZnRBcm0nIDogJ2xlZnRTaG91bGRlcicsXG4gICAgJ2xvd2VyTGVmdEFybScgOiAnbGVmdEVsYm93Sm9pbnQnLFxuICAgICd1cHBlclJpZ2h0QXJtJzogJ3JpZ2h0U2hvdWxkZXInLFxuICAgICdsb3dlclJpZ2h0QXJtJzogJ3JpZ2h0RWxib3dKb2ludCcsXG4gICAgJ3VwcGVyTGVmdExlZycgOiAnbGVmdEhpcEpvaW50JywgICBcbiAgICAnbG93ZXJMZWZ0TGVnJyA6ICdsZWZ0S25lZUpvaW50JywgIFxuICAgICd1cHBlclJpZ2h0TGVnJzogJ3JpZ2h0SGlwSm9pbnQnLCBcbiAgICAnbG93ZXJSaWdodExlZyc6ICdyaWdodEtuZWVKb2ludCcsIFxuICAgICdwZWx2aXMnICAgICAgIDogJ3NwaW5lSm9pbnQnLCAgICAgXG4gICAgJ3VwcGVyQm9keScgICAgOiAnc3BpbmVKb2ludCdcbiAgfVxuXG4gIHZhciBqb2ludE5hbWUgPSBqb2ludFttdXNjbGVOYW1lXVxuICB2YXIgam9pbnRTdGF0ZSA9IHRoaXMuZ2V0TGFzdFR1cm4oKVtqb2ludE5hbWVdXG4gIHZhciBhY3Rpb25cblxuICBpZihqb2ludFN0YXRlID09PSAnZXhwYW5kJykgYWN0aW9uID0gJ2NvbnRyYWN0J1xuICBlbHNlIGlmKGpvaW50U3RhdGUgPT09ICdjb250cmFjdCcpIGFjdGlvbiA9ICdyZWxheCdcbiAgZWxzZSBpZihqb2ludFN0YXRlID09PSAncmVsYXgnKSBhY3Rpb24gPSAnZXhwYW5kJ1xuICBlbHNlIGFjdGlvbiA9ICdleHBhbmQnXG5cbiAgY29uc29sZS5sb2coYWN0aW9uLCBqb2ludE5hbWUpXG5cbiAgdGhpcy5uZXdBY3Rpb24oe1xuICBcdGpvaW50TmFtZTogam9pbnROYW1lLCBcbiAgXHR0eXBlOiBhY3Rpb25cbiAgfSlcblxuICB0ZXh0dXJlcyA9IHtcbiAgICAnZXhwYW5kJyAgOiAncmVkc3F1YXJlJyxcbiAgICAnY29udHJhY3QnOiAnYmx1ZXNxdWFyZScsXG4gICAgJ3JlbGF4JyAgIDogJ3doaXRlc3F1YXJlJ1xuICB9XG5cbiAgdGhpcy5zaGFkb3dDbG9uZS5jaGlsZHJlbi5maWx0ZXIoZnVuY3Rpb24gKHBhcnQpIHtcbiAgICByZXR1cm4gcGFydC5uYW1lID09PSBtdXNjbGVOYW1lXG4gIH0pWzBdLmxvYWRUZXh0dXJlKHRleHR1cmVzW2FjdGlvbl0pXG5cbiAgdGhpcy5pc1Jlc2V0aW5nUGxheWJhY2sgPSB0cnVlXG59XG5cblBsYXllci5wcm90b3R5cGUuc2V0Q29udHJvbGxlciA9IGZ1bmN0aW9uKGNvbnRyb2xsZXIpIHtcbiAgdGhpcy5jb250cm9sbGVyID0gY29udHJvbGxlclxuXG4gIGlmKGNvbnRyb2xsZXIgPT09ICdkdW1teScpIHtcbiAgICB0aGlzLmlzQWxsb3dpbmdJbnB1dCA9IGZhbHNlXG4gIH1cbiAgaWYoY29udHJvbGxlciA9PT0gJ25ldHdvcmsnKSB7XG4gICAgdGhpcy5pc0FsbG93aW5nSW5wdXQgPSBmYWxzZVxuICB9XG4gIGlmKGNvbnRyb2xsZXIgPT09ICdtZScpIHtcblxuICB9XG59XG5cbi8vIC10b2RvXG5QbGF5ZXIucHJvdG90eXBlLm1ldGhvZDEgPSBmdW5jdGlvbiAoKSB7XG4gIHRoaXMucmFnZG9sbC5hbHBoYSA9IDAuNVxuXHR0aGlzLnJhZ2RvbGwucmVsYXhBbGwoKVxuICB0aGlzLm5ld1R1cm4oKVxuICB0aGlzLnNhdmVQb3NpdGlvbigpXG4gIHRoaXMuc2hhZG93KClcbn1cbi8vIC10b2RvXG5QbGF5ZXIucHJvdG90eXBlLm1ldGhvZDIgPSBmdW5jdGlvbiAoKSB7XG4gIFxuXHR0aGlzLmxvYWRQb3NpdGlvbigpXG4gIHRoaXMucmFnZG9sbC5yZWxheEFsbCgpXG4gIFxuICB0aGlzLmV4ZWN1dGVNb3Zlcyh0aGlzLmdldExhc3RUdXJuKCksIDAuNSlcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBQbGF5ZXIiLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGdhbWUsIG9mZnNldFgsIG9mZnNldFkpIHtcblxuICB2YXIgQ09OU1RSQUlOVF9GT1JDRSA9IDk5OTk5OTk5OTk5OVxuICB2YXIgTSA9IDEwMCAvLyBzY2FsZVxuICB2YXIgTU9UT1JfRk9SQ0UgPSA1XG5cbiAgdmFyIGJvZHlTcHJpdGVzID0ge31cbiAgdmFyIGJvZHlKb2ludHMgPSB7fVxuICB2YXIgYm9keVBhcnRzID0ge31cblxuICAvLyBub3JtYWxpemVkIHNjYWxlc1xuICB2YXIgc2l6ZXMgPSB7fVxuICBzaXplcy5zaG91bGRlcnNEaXN0YW5jZSA9IDAuNFxuICBzaXplcy51cHBlckFybUxlbmd0aCA9IDAuNVxuICBzaXplcy5sb3dlckFybUxlbmd0aCA9IDAuNVxuICBzaXplcy51cHBlckFybVNpemUgPSAwLjJcbiAgc2l6ZXMubG93ZXJBcm1TaXplID0gMC4yXG4gIHNpemVzLm5lY2tMZW5ndGggPSAwLjFcbiAgc2l6ZXMuaGVhZFJhZGl1cyA9IDAuMTVcbiAgc2l6ZXMudXBwZXJCb2R5TGVuZ3RoID0gMC42XG4gIHNpemVzLnBlbHZpc0xlbmd0aCA9IDAuNFxuICBzaXplcy51cHBlckxlZ0xlbmd0aCA9IDAuNlxuICBzaXplcy51cHBlckxlZ1NpemUgPSAwLjJcbiAgc2l6ZXMubG93ZXJMZWdTaXplID0gMC4yXG4gIHNpemVzLmxvd2VyTGVnTGVuZ3RoID0gMC41XG5cbiAgLy8gYXBwbHkgc2NhbGUgbXVsdGlwbGllclxuICBPYmplY3Qua2V5cyhzaXplcykuZm9yRWFjaChmdW5jdGlvbihrZXkpIHtcbiAgICBzaXplc1trZXldICo9IE1cbiAgfSlcblxuICAvLyBMb3dlciBsZWdzXG4gIGJvZHlQYXJ0cy5sb3dlckxlZnRMZWcgPSB7XG4gICAgeDogLXNpemVzLnNob3VsZGVyc0Rpc3RhbmNlIC8gMixcbiAgICB5OiBzaXplcy5sb3dlckxlZ0xlbmd0aCAvIDIsXG4gICAgdzogc2l6ZXMubG93ZXJMZWdTaXplLFxuICAgIGg6IHNpemVzLmxvd2VyTGVnTGVuZ3RoLFxuICAgIG1hc3M6IDAuNlxuICB9XG4gIGJvZHlQYXJ0cy5sb3dlclJpZ2h0TGVnID0ge1xuICAgIHg6IHNpemVzLnNob3VsZGVyc0Rpc3RhbmNlIC8gMixcbiAgICB5OiBzaXplcy5sb3dlckxlZ0xlbmd0aCAvIDIsXG4gICAgdzogc2l6ZXMubG93ZXJMZWdTaXplLFxuICAgIGg6IHNpemVzLmxvd2VyTGVnTGVuZ3RoLFxuICAgIG1hc3M6IDAuNlxuICB9XG4gIC8vIFVwcGVyIGxlZ3NcbiAgYm9keVBhcnRzLnVwcGVyTGVmdExlZyA9IHtcbiAgICB4OiAtc2l6ZXMuc2hvdWxkZXJzRGlzdGFuY2UgLyAyLFxuICAgIHk6IGJvZHlQYXJ0cy5sb3dlckxlZnRMZWcueSArIHNpemVzLmxvd2VyTGVnTGVuZ3RoIC8gMiArIHNpemVzLnVwcGVyTGVnTGVuZ3RoIC8gMixcbiAgICB3OiBzaXplcy51cHBlckxlZ1NpemUsXG4gICAgaDogc2l6ZXMudXBwZXJMZWdMZW5ndGgsXG4gICAgbWFzczogMC41XG4gIH1cbiAgYm9keVBhcnRzLnVwcGVyUmlnaHRMZWcgPSB7XG4gICAgeDogc2l6ZXMuc2hvdWxkZXJzRGlzdGFuY2UgLyAyLFxuICAgIHk6IGJvZHlQYXJ0cy5sb3dlclJpZ2h0TGVnLnkgKyBzaXplcy5sb3dlckxlZ0xlbmd0aCAvIDIgKyBzaXplcy51cHBlckxlZ0xlbmd0aCAvIDIsXG4gICAgdzogc2l6ZXMudXBwZXJMZWdTaXplLFxuICAgIGg6IHNpemVzLnVwcGVyTGVnTGVuZ3RoLFxuICAgIG1hc3M6IDAuNVxuICB9XG4gIC8vIFBlbHZpc1xuICBib2R5UGFydHMucGVsdmlzID0ge1xuICAgIHg6IDAsXG4gICAgeTogYm9keVBhcnRzLnVwcGVyTGVmdExlZy55ICsgc2l6ZXMudXBwZXJMZWdMZW5ndGggLyAyICsgc2l6ZXMucGVsdmlzTGVuZ3RoIC8gMixcbiAgICB3OiBzaXplcy5zaG91bGRlcnNEaXN0YW5jZSxcbiAgICBoOiBzaXplcy5wZWx2aXNMZW5ndGgsXG4gICAgbWFzczogMC43XG4gIH1cbiAgLy8gVXBwZXIgYm9keVxuICBib2R5UGFydHMudXBwZXJCb2R5ID0ge1xuICAgIHg6IDAsXG4gICAgeTogYm9keVBhcnRzLnBlbHZpcy55ICsgc2l6ZXMucGVsdmlzTGVuZ3RoIC8gMiArIHNpemVzLnVwcGVyQm9keUxlbmd0aCAvIDIsXG4gICAgdzogc2l6ZXMuc2hvdWxkZXJzRGlzdGFuY2UsXG4gICAgaDogc2l6ZXMudXBwZXJCb2R5TGVuZ3RoLFxuICAgIG1hc3M6IDEuMFxuICB9XG4gIC8vIEhlYWRcbiAgYm9keVBhcnRzLmhlYWQgPSB7XG4gICAgeDogMCxcbiAgICB5OiBib2R5UGFydHMudXBwZXJCb2R5LnkgKyBzaXplcy51cHBlckJvZHlMZW5ndGggLyAyICsgc2l6ZXMuaGVhZFJhZGl1cyArIHNpemVzLm5lY2tMZW5ndGgsXG4gICAgdzogc2l6ZXMuaGVhZFJhZGl1cyAqIDIsXG4gICAgaDogc2l6ZXMuaGVhZFJhZGl1cyAqIDIsXG4gICAgbWFzczogMC4zXG4gIH1cbiAgLy8gVXBwZXIgYXJtc1xuICBib2R5UGFydHMudXBwZXJMZWZ0QXJtID0ge1xuICAgIHg6IC1zaXplcy5zaG91bGRlcnNEaXN0YW5jZSAvIDIgLSBzaXplcy51cHBlckFybUxlbmd0aCAvIDIsXG4gICAgeTogYm9keVBhcnRzLnVwcGVyQm9keS55ICsgc2l6ZXMudXBwZXJCb2R5TGVuZ3RoIC8gMixcbiAgICB3OiBzaXplcy51cHBlckFybUxlbmd0aCxcbiAgICBoOiBzaXplcy51cHBlckFybVNpemUsXG4gICAgbWFzczogMC40XG4gIH1cbiAgYm9keVBhcnRzLnVwcGVyUmlnaHRBcm0gPSB7XG4gICAgeDogc2l6ZXMuc2hvdWxkZXJzRGlzdGFuY2UgLyAyICsgc2l6ZXMudXBwZXJBcm1MZW5ndGggLyAyLFxuICAgIHk6IGJvZHlQYXJ0cy51cHBlckJvZHkueSArIHNpemVzLnVwcGVyQm9keUxlbmd0aCAvIDIsXG4gICAgdzogc2l6ZXMudXBwZXJBcm1MZW5ndGgsXG4gICAgaDogc2l6ZXMudXBwZXJBcm1TaXplLFxuICAgIG1hc3M6IDAuNFxuICB9XG4gIC8vIGxvd2VyIGFybXNcbiAgYm9keVBhcnRzLmxvd2VyTGVmdEFybSA9IHtcbiAgICB4OiBib2R5UGFydHMudXBwZXJMZWZ0QXJtLnggLSBzaXplcy5sb3dlckFybUxlbmd0aCAvIDIgLSBzaXplcy51cHBlckFybUxlbmd0aCAvIDIsXG4gICAgeTogYm9keVBhcnRzLnVwcGVyTGVmdEFybS55LFxuICAgIHc6IHNpemVzLmxvd2VyQXJtTGVuZ3RoLFxuICAgIGg6IHNpemVzLmxvd2VyQXJtU2l6ZSxcbiAgICBtYXNzOiAwLjZcbiAgfVxuICBib2R5UGFydHMubG93ZXJSaWdodEFybSA9IHtcbiAgICB4OiBib2R5UGFydHMudXBwZXJSaWdodEFybS54ICsgc2l6ZXMubG93ZXJBcm1MZW5ndGggLyAyICsgc2l6ZXMudXBwZXJBcm1MZW5ndGggLyAyLFxuICAgIHk6IGJvZHlQYXJ0cy51cHBlclJpZ2h0QXJtLnksXG4gICAgdzogc2l6ZXMubG93ZXJBcm1MZW5ndGgsXG4gICAgaDogc2l6ZXMubG93ZXJBcm1TaXplLFxuICAgIG1hc3M6IDAuNlxuICB9XG4gIC8vIE5lY2tcbiAgYm9keUpvaW50cy5uZWNrSm9pbnQgPSB7XG4gICAgYTogJ2hlYWQnLFxuICAgIGI6ICd1cHBlckJvZHknLFxuICAgIHBpdm90X2E6IFswLCAtc2l6ZXMuaGVhZFJhZGl1cyAtIHNpemVzLm5lY2tMZW5ndGggLyAyXSxcbiAgICBwaXZvdF9iOiBbMCwgc2l6ZXMudXBwZXJCb2R5TGVuZ3RoIC8gMl0sXG4gICAgbGltaXRzOiBbLU1hdGguUEkvMTAsIE1hdGguUEkvMTBdXG4gIH1cbiAgLy8gS25lZXNcbiAgYm9keUpvaW50cy5sZWZ0S25lZUpvaW50ID0ge1xuICAgIGE6ICdsb3dlckxlZnRMZWcnLFxuICAgIGI6ICd1cHBlckxlZnRMZWcnLFxuICAgIHBpdm90X2E6IFswLCBzaXplcy5sb3dlckxlZ0xlbmd0aCAvIDJdLFxuICAgIHBpdm90X2I6IFswLCAtc2l6ZXMudXBwZXJMZWdMZW5ndGggLyAyXSxcbiAgICBsaW1pdHM6IFstTWF0aC5QSS8yLCBNYXRoLlBJLzJdXG4gIH1cbiAgYm9keUpvaW50cy5yaWdodEtuZWVKb2ludCA9IHtcbiAgICBhOiAnbG93ZXJSaWdodExlZycsXG4gICAgYjogJ3VwcGVyUmlnaHRMZWcnLFxuICAgIHBpdm90X2E6IFswLCBzaXplcy5sb3dlckxlZ0xlbmd0aCAvIDJdLFxuICAgIHBpdm90X2I6IFswLCAtc2l6ZXMudXBwZXJMZWdMZW5ndGggLyAyXSxcbiAgICBsaW1pdHM6IFstTWF0aC5QSS8yLCBNYXRoLlBJLzJdXG4gIH1cbiAgLy8gSGlwc1xuICBib2R5Sm9pbnRzLmxlZnRIaXBKb2ludCA9IHtcbiAgICBhOiAndXBwZXJMZWZ0TGVnJyxcbiAgICBiOiAncGVsdmlzJyxcbiAgICBwaXZvdF9hOiBbMCwgc2l6ZXMudXBwZXJMZWdMZW5ndGggLyAyXSxcbiAgICBwaXZvdF9iOiBbLXNpemVzLnNob3VsZGVyc0Rpc3RhbmNlIC8gMiwgLXNpemVzLnBlbHZpc0xlbmd0aCAvIDJdLFxuICAgIGxpbWl0czogWy1NYXRoLlBJLzQsIE1hdGguUEkvNF1cbiAgfVxuICBib2R5Sm9pbnRzLnJpZ2h0SGlwSm9pbnQgPSB7XG4gICAgYTogJ3VwcGVyUmlnaHRMZWcnLFxuICAgIGI6ICdwZWx2aXMnLFxuICAgIHBpdm90X2E6IFswLCBzaXplcy51cHBlckxlZ0xlbmd0aCAvIDJdLFxuICAgIHBpdm90X2I6IFtzaXplcy5zaG91bGRlcnNEaXN0YW5jZSAvIDIsIC1zaXplcy5wZWx2aXNMZW5ndGggLyAyXSxcbiAgICBsaW1pdHM6IFstTWF0aC5QSS80LCBNYXRoLlBJLzRdXG4gIH1cbiAgLy8gU3BpbmVcbiAgYm9keUpvaW50cy5zcGluZUpvaW50ID0ge1xuICAgIGE6ICdwZWx2aXMnLFxuICAgIGI6ICd1cHBlckJvZHknLFxuICAgIHBpdm90X2E6IFswLCBzaXplcy5wZWx2aXNMZW5ndGggLyAyXSxcbiAgICBwaXZvdF9iOiBbMCwgLXNpemVzLnVwcGVyQm9keUxlbmd0aCAvIDJdLFxuICAgIGxpbWl0czogWy1NYXRoLlBJLzEyLCBNYXRoLlBJLzEyXVxuICB9XG4gIC8vIFNob3VsZGVyc1xuICBib2R5Sm9pbnRzLmxlZnRTaG91bGRlciA9IHtcbiAgICBhOiAndXBwZXJCb2R5JyxcbiAgICBiOiAndXBwZXJMZWZ0QXJtJyxcbiAgICBwaXZvdF9hOiBbLXNpemVzLnNob3VsZGVyc0Rpc3RhbmNlIC8gMiwgc2l6ZXMudXBwZXJCb2R5TGVuZ3RoIC8gMl0sXG4gICAgcGl2b3RfYjogW3NpemVzLnVwcGVyQXJtTGVuZ3RoIC8gMiwgMF0sXG4gICAgbGltaXRzOiBbLU1hdGguUEkvMywgTWF0aC5QSS8zXVxuICB9XG4gIGJvZHlKb2ludHMucmlnaHRTaG91bGRlciA9IHtcbiAgICBhOiAndXBwZXJCb2R5JyxcbiAgICBiOiAndXBwZXJSaWdodEFybScsXG4gICAgcGl2b3RfYTogW3NpemVzLnNob3VsZGVyc0Rpc3RhbmNlIC8gMiwgc2l6ZXMudXBwZXJCb2R5TGVuZ3RoIC8gMl0sXG4gICAgcGl2b3RfYjogWy1zaXplcy51cHBlckFybUxlbmd0aCAvIDIsIDBdLFxuICAgIGxpbWl0czogWy1NYXRoLlBJLzMsIE1hdGguUEkvM11cbiAgfVxuICAvLyBFbGJvd3NcbiAgYm9keUpvaW50cy5sZWZ0RWxib3dKb2ludCA9IHtcbiAgICBhOiAnbG93ZXJMZWZ0QXJtJyxcbiAgICBiOiAndXBwZXJMZWZ0QXJtJyxcbiAgICBwaXZvdF9hOiBbc2l6ZXMubG93ZXJBcm1MZW5ndGggLyAyLCAwXSxcbiAgICBwaXZvdF9iOiBbLXNpemVzLnVwcGVyQXJtTGVuZ3RoIC8gMiwgMF0sXG4gICAgbGltaXRzOiBbLU1hdGguUEkvNCwgTWF0aC5QSS80XVxuICB9XG4gIGJvZHlKb2ludHMucmlnaHRFbGJvd0pvaW50ID0ge1xuICAgIGE6ICdsb3dlclJpZ2h0QXJtJyxcbiAgICBiOiAndXBwZXJSaWdodEFybScsXG4gICAgcGl2b3RfYTogWy1zaXplcy5sb3dlckFybUxlbmd0aCAvIDIsIDBdLFxuICAgIHBpdm90X2I6IFtzaXplcy51cHBlckFybUxlbmd0aCAvIDIsIDBdLFxuICAgIGxpbWl0czogWy1NYXRoLlBJLzQsIE1hdGguUEkvNF1cbiAgfVxuXG4gIC8vXG5cbiAgdmFyIHJhZ2RvbGwgPSBnYW1lLmFkZC5ncm91cChudWxsLCBudWxsLCAncmFnZG9sbCcpXG5cbiAgdmFyIGNvbGxpc2lvbkdyb3VwID0gZ2FtZS5waHlzaWNzLnAyLmNyZWF0ZUNvbGxpc2lvbkdyb3VwKClcbiAgZ2FtZS5waHlzaWNzLnAyLnVwZGF0ZUJvdW5kc0NvbGxpc2lvbkdyb3VwKClcblxuICBjb25zb2xlLmxvZyhjb2xsaXNpb25Hcm91cClcblxuICAvKipcbiAgICogY3JlYXRlIG11c2NsZXNcbiAgICovXG4gIE9iamVjdC5rZXlzKGJvZHlQYXJ0cykuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG5cbiAgICB2YXIgeCA9IGJvZHlQYXJ0c1trZXldLnggKyBvZmZzZXRYXG4gICAgdmFyIHkgPSBib2R5UGFydHNba2V5XS55ICsgb2Zmc2V0WVxuICAgIHZhciB3ID0gYm9keVBhcnRzW2tleV0ud1xuICAgIHZhciBoID0gYm9keVBhcnRzW2tleV0uaFxuICAgIHZhciBtYXNzID0gYm9keVBhcnRzW2tleV0ubWFzc1xuICAgIHZhciBzcHJpdGUgPSAnd2hpdGVzcXVhcmUnXG5cbiAgICB2YXIgcGFydCA9IHJhZ2RvbGwuY3JlYXRlKHgsIHksICd3aGl0ZXNxdWFyZScpXG5cbiAgICBwYXJ0LndpZHRoID0gd1xuICAgIHBhcnQuaGVpZ2h0ID0gaFxuICAgIHBhcnQubmFtZSA9IGtleVxuXG4gICAgZ2FtZS5waHlzaWNzLnAyLmVuYWJsZShwYXJ0KVxuICAgIHBhcnQuYm9keS5zZXRDb2xsaXNpb25Hcm91cChjb2xsaXNpb25Hcm91cClcblxuICAgIHBhcnQuYm9keS5tYXNzID0gbWFzc1xuXG4gICAgdmFyIHdhbGxNYXRlcmlhbCA9IGdhbWUucGh5c2ljcy53YWxsTWF0ZXJpYWxcbiAgICB2YXIgcGFydE1hdGVyaWFsID0gZ2FtZS5waHlzaWNzLnAyLmNyZWF0ZU1hdGVyaWFsKGtleSsnTWF0ZXJpYWwnLCBwYXJ0LmJvZHkpXG5cbiAgICB2YXIgY29udGFjdE1hdGVyaWFsID0gZ2FtZS5waHlzaWNzLnAyLmNyZWF0ZUNvbnRhY3RNYXRlcmlhbChwYXJ0TWF0ZXJpYWwsIHdhbGxNYXRlcmlhbClcblxuICAgIGNvbnRhY3RNYXRlcmlhbC5mcmljdGlvbiA9IDEwMCAgICAgICAgIC8vIEZyaWN0aW9uIHRvIHVzZSBpbiB0aGUgY29udGFjdCBvZiB0aGVzZSB0d28gbWF0ZXJpYWxzLlxuICAgIC8vIGNvbnRhY3RNYXRlcmlhbC5yZXN0aXR1dGlvbiA9IDAgICAgICAgIC8vIFJlc3RpdHV0aW9uIChpLmUuIGhvdyBib3VuY3kgaXQgaXMhKSB0byB1c2UgaW4gdGhlIGNvbnRhY3Qgb2YgdGhlc2UgdHdvIG1hdGVyaWFscy5cbiAgICAvLyBjb250YWN0TWF0ZXJpYWwuc3RpZmZuZXNzID0gMWU3ICAgICAgICAgIC8vIFN0aWZmbmVzcyBvZiB0aGUgcmVzdWx0aW5nIENvbnRhY3RFcXVhdGlvbiB0aGF0IHRoaXMgQ29udGFjdE1hdGVyaWFsIGdlbmVyYXRlLlxuICAgIC8vIGNvbnRhY3RNYXRlcmlhbC5yZWxheGF0aW9uID0gMyAgICAgICAgICAgLy8gUmVsYXhhdGlvbiBvZiB0aGUgcmVzdWx0aW5nIENvbnRhY3RFcXVhdGlvbiB0aGF0IHRoaXMgQ29udGFjdE1hdGVyaWFsIGdlbmVyYXRlLlxuICAgIC8vIGNvbnRhY3RNYXRlcmlhbC5mcmljdGlvblN0aWZmbmVzcyA9IDFlNyAgLy8gU3RpZmZuZXNzIG9mIHRoZSByZXN1bHRpbmcgRnJpY3Rpb25FcXVhdGlvbiB0aGF0IHRoaXMgQ29udGFjdE1hdGVyaWFsIGdlbmVyYXRlLlxuICAgIC8vIGNvbnRhY3RNYXRlcmlhbC5mcmljdGlvblJlbGF4YXRpb24gPSAxMDAgLy8gUmVsYXhhdGlvbiBvZiB0aGUgcmVzdWx0aW5nIEZyaWN0aW9uRXF1YXRpb24gdGhhdCB0aGlzIENvbnRhY3RNYXRlcmlhbCBnZW5lcmF0ZS5cbiAgICAvLyBjb250YWN0TWF0ZXJpYWwuc3VyZmFjZVZlbG9jaXR5ID0gMCAgICAgIC8vIFdpbGwgYWRkIHN1cmZhY2UgdmVsb2NpdHkgdG8gdGhpcyBtYXRlcmlhbC4gSWYgYm9keUEgcmVzdHMgb24gdG9wIGlmIGJvZHlCLCBhbmQgdGhlIHN1cmZhY2UgdmVsb2NpdHkgaXMgcG9zaXRpdmUsIGJvZHlBIHdpbGwgc2xpZGUgdG8gdGhlIHJpZ2h0LlxuXG4gICAgYm9keVNwcml0ZXNba2V5XSA9IHBhcnRcbiAgfSlcblxuICAvKipcbiAgICogY3JlYXRlIGpvaW50c1xuICAgKi9cbiAgT2JqZWN0LmtleXMoYm9keUpvaW50cykuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG5cbiAgICB2YXIgam9pbnQgPSBib2R5Sm9pbnRzW2tleV1cbiAgICBcbiAgICB2YXIgY29uc3RyYWludCA9IGdhbWUucGh5c2ljcy5wMi5jcmVhdGVSZXZvbHV0ZUNvbnN0cmFpbnRcbiAgICAgIChcbiAgICAgICAgYm9keVNwcml0ZXNbam9pbnQuYV0sIFxuICAgICAgICBqb2ludC5waXZvdF9hLCBcbiAgICAgICAgYm9keVNwcml0ZXNbam9pbnQuYl0sIFxuICAgICAgICBqb2ludC5waXZvdF9iLCBcbiAgICAgICAgQ09OU1RSQUlOVF9GT1JDRVxuICAgICAgKVxuXG4gICAgY29uc3RyYWludC5zZXRMaW1pdHMoam9pbnQubGltaXRzWzBdLCBqb2ludC5saW1pdHNbMV0pXG5cbiAgICAvL2NvbnN0cmFpbnQuY29sbGlkZUNvbm5lY3RlZCA9IGZhbHNlXG5cbiAgICBjb25zdHJhaW50Lmxvd2VyTGltaXRFcXVhdGlvbi5uZWVkc1VwZGF0ZSA9IHRydWVcbiAgICBjb25zdHJhaW50LnVwcGVyTGltaXRFcXVhdGlvbi5uZWVkc1VwZGF0ZSA9IHRydWUgXG5cbiAgICAvLyBjb25zdHJhaW50Lmxvd2VyTGltaXRFcXVhdGlvbi5tdWx0aXBsaWVyID0gMTAwXG4gICAgLy8gY29uc3RyYWludC51cHBlckxpbWl0RXF1YXRpb24ubXVsdGlwbGllciA9IDEwMFxuXG4gICAgY29uc3RyYWludC5sb3dlckxpbWl0RXF1YXRpb24uZXBzaWxvbiA9IDEwMDBcbiAgICBjb25zdHJhaW50LnVwcGVyTGltaXRFcXVhdGlvbi5lcHNpbG9uID0gMTAwMFxuXG4gICAgY29uc3RyYWludC5tb3RvckVxdWF0aW9uLnJlbGF4YXRpb24gPSAxXG4gICAgY29uc3RyYWludC5tb3RvckVxdWF0aW9uLnN0aWZmbmVzcyA9IDExMDAwMDBcblxuICAgIGlmKCFyYWdkb2xsLmpvaW50cykgcmFnZG9sbC5qb2ludHMgPSB7fVxuICAgIHJhZ2RvbGwuam9pbnRzW2tleV0gPSBjb25zdHJhaW50XG4gIH0pXG5cbiAgLyoqXG4gICAqIGVuYWJsZSBqb2ludCBtb3RvclxuICAgKiBcbiAgICogQG1ldGhvZCBmbGV4XG4gICAqIEBwYXJhbSB7U3RyaW5nfSBqb2ludE5hbWVcbiAgICovXG4gIHJhZ2RvbGwuZmxleCA9IGZ1bmN0aW9uIChqb2ludE5hbWUpIHtcbiAgICB2YXIgam9pbnQgPSB0aGlzLmpvaW50c1tqb2ludE5hbWVdXG4gICAgam9pbnQuc2V0TW90b3JTcGVlZCgwKVxuICAgIGpvaW50LmVuYWJsZU1vdG9yKClcbiAgICBqb2ludC5zZXRNb3RvclNwZWVkKE1PVE9SX0ZPUkNFKVxuICB9XG5cbiAgLyoqXG4gICAqIGVuYWJsZSBqb2ludCBtb3RvclxuICAgKiBcbiAgICogQG1ldGhvZCBjb250cmFjdFxuICAgKiBAcGFyYW0ge1N0cmluZ30gam9pbnROYW1lXG4gICAqL1xuICByYWdkb2xsLmNvbnRyYWN0ID0gZnVuY3Rpb24gKGpvaW50TmFtZSkge1xuICAgIHZhciBqb2ludCA9IHRoaXMuam9pbnRzW2pvaW50TmFtZV1cbiAgICBqb2ludC5zZXRNb3RvclNwZWVkKDApXG4gICAgam9pbnQuZW5hYmxlTW90b3IoKVxuICAgIGpvaW50LnNldE1vdG9yU3BlZWQoLU1PVE9SX0ZPUkNFKVxuICB9XG5cbiAgLyoqXG4gICAqIGRpc2FibGluZyBtb3RvciBvbiBhbGwgam9pbnRzXG4gICAqXG4gICAqIEBtZXRob2QgcmVsYXhBbGxcbiAgICovXG4gIHJhZ2RvbGwucmVsYXhBbGwgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgX3RoaXMgPSB0aGlzXG4gICAgT2JqZWN0LmtleXMoX3RoaXMuam9pbnRzKS5mb3JFYWNoKGZ1bmN0aW9uKGpvaW50KSB7XG4gICAgICBfdGhpcy5yZWxheChqb2ludClcbiAgICB9KVxuICB9XG5cbiAgLyoqXG4gICAqIGRpc2FibGUgam9pbnQgbW90b3JcbiAgICpcbiAgICogQG1ldGhvZCByZWxheFxuICAgKiBAcGFyYW0ge1N0cmluZ30gam9pbnROYW1lXG4gICAqL1xuICByYWdkb2xsLnJlbGF4ID0gZnVuY3Rpb24oam9pbnROYW1lKSB7XG4gICAgdmFyIGpvaW50ID0gcmFnZG9sbC5qb2ludHNbam9pbnROYW1lXVxuICAgIGpvaW50LmRpc2FibGVNb3RvcigpXG4gIH1cblxuICByZXR1cm4gcmFnZG9sbFxufSIsIlxudmFyIHByb3BlcnRpZXMgPSByZXF1aXJlKCcuL3Byb3BlcnRpZXMnKVxuXG52YXIgc3RhdGVzID0geyBcblx0Ym9vdDogcmVxdWlyZSgnLi9zdGF0ZXMvYm9vdC5qcycpLFxuXHRwcmVsb2FkZXI6IHJlcXVpcmUoJy4vc3RhdGVzL3ByZWxvYWRlci5qcycpLFxuXHRtYWlubWVudTogcmVxdWlyZSgnLi9zdGF0ZXMvbWFpbm1lbnUuanMnKSxcblx0c2luZ2xlcGxheWVybWVudTogcmVxdWlyZSgnLi9zdGF0ZXMvc2luZ2xlcGxheWVybWVudS5qcycpLFxuXHRtdWx0aXBsYXllcm1lbnU6IHJlcXVpcmUoJy4vc3RhdGVzL211bHRpcGxheWVybWVudS5qcycpLFxuXHRzZXR0aW5nc21lbnU6IHJlcXVpcmUoJy4vc3RhdGVzL3NldHRpbmdzbWVudS5qcycpLFxuXHR0cmFpbjogcmVxdWlyZSgnLi9zdGF0ZXMvdHJhaW4uanMnKSxcblx0cXVpY2ttYXRjaDogcmVxdWlyZSgnLi9zdGF0ZXMvcXVpY2ttYXRjaC5qcycpXG59XG5cbndpbmRvdy5vbmxvYWQgPSBmdW5jdGlvbigpIHtcblxuXHR2YXIgUGhhc2VyID0gd2luZG93LlBoYXNlciAvLyBoYWNrXG5cdHZhciBpbyA9IHdpbmRvdy5pbyAvLyBoYWNrXG5cblx0dmFyIGdhbWUgPSBuZXcgUGhhc2VyLkdhbWUocHJvcGVydGllcy5zaXplLngsIHByb3BlcnRpZXMuc2l6ZS55LCBQaGFzZXIuQVVUTywgJ2dhbWUnKVxuXG5cdGdhbWUuc3RhdGUuYWRkKCdib290Jywgc3RhdGVzLmJvb3QoZ2FtZSkpXG5cdGdhbWUuc3RhdGUuYWRkKCdwcmVsb2FkZXInLCBzdGF0ZXMucHJlbG9hZGVyKGdhbWUpKVxuXHRnYW1lLnN0YXRlLmFkZCgnbWFpbm1lbnUnLCBzdGF0ZXMubWFpbm1lbnUoZ2FtZSkpXG5cdGdhbWUuc3RhdGUuYWRkKCdzaW5nbGVwbGF5ZXJtZW51Jywgc3RhdGVzLnNpbmdsZXBsYXllcm1lbnUoZ2FtZSkpXG5cdGdhbWUuc3RhdGUuYWRkKCdtdWx0aXBsYXllcm1lbnUnLCBzdGF0ZXMubXVsdGlwbGF5ZXJtZW51KGdhbWUpKVxuXHRnYW1lLnN0YXRlLmFkZCgnc2V0dGluZ3NtZW51Jywgc3RhdGVzLnNldHRpbmdzbWVudShnYW1lKSlcblx0Z2FtZS5zdGF0ZS5hZGQoJ3RyYWluJywgc3RhdGVzLnRyYWluKGdhbWUpKVxuXHRnYW1lLnN0YXRlLmFkZCgncXVpY2ttYXRjaCcsIHN0YXRlcy5xdWlja21hdGNoKGdhbWUpKVxuXG5cdGdhbWUuc3RhdGUuc3RhcnQoJ2Jvb3QnKVxufSIsInZhciBucG1Qcm9wZXJ0aWVzID0gcmVxdWlyZSgnLi4vLi4vLi4vcGFja2FnZS5qc29uJylcblxubW9kdWxlLmV4cG9ydHMgPSB7IFxuXG4gIHRpdGxlOiAnUGhhc2VyIEpTIEJvaWxlcnBsYXRlJyxcblxuICBkZXNjcmlwdGlvbjogbnBtUHJvcGVydGllcy5kZXNjcmlwdGlvbixcblxuICBwb3J0OiAzMDE3LFxuXG4gIGxpdmVSZWxvYWRQb3J0OiAzMDE4LFxuXG4gIHNob3dTdGF0czogdHJ1ZSxcblxuICBzaXplOiB7IFxuICAgIHg6IDgwMCxcbiAgICB5OiA2MDBcbiAgfSwgXG4gIFxuICBhbmFseXRpY3NJZDogJydcbn1cbiIsInZhciBTdGF0cyA9IHJlcXVpcmUoJ1N0YXRzJylcbiAgLCBwcm9wZXJ0aWVzID0gcmVxdWlyZSgnLi4vcHJvcGVydGllcycpXG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oZ2FtZSkge1xuXG4gIC8vIEZQUyBjb3VudGVyXG4gIGZ1bmN0aW9uIGFkZFN0YXRzKCkge1xuICAgIHZhciBzdGF0cyA9IG5ldyBTdGF0cygpXG4gICAgc3RhdHMuc2V0TW9kZSgwKVxuICAgIHN0YXRzLmRvbUVsZW1lbnQuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnXG4gICAgc3RhdHMuZG9tRWxlbWVudC5zdHlsZS5sZWZ0ID0gJzBweCdcbiAgICBzdGF0cy5kb21FbGVtZW50LnN0eWxlLnRvcCA9ICcwcHgnXG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChzdGF0cy5kb21FbGVtZW50KVxuICAgIHNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcbiAgICAgIHN0YXRzLmJlZ2luKClcbiAgICAgIHN0YXRzLmVuZCgpXG4gICAgfSwgMTAwMCAvIDYwKVxuICB9XG5cbiAgdmFyIGdhbWVTdGF0ZSA9IHt9XG5cbiAgZ2FtZVN0YXRlLnByZWxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgZ2FtZS5zdGFnZS5kaXNhYmxlVmlzaWJpbGl0eUNoYW5nZSA9IHRydWVcbiAgfVxuXG4gIGdhbWVTdGF0ZS5jcmVhdGUgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICBpZiAocHJvcGVydGllcy5zaG93U3RhdHMpIGFkZFN0YXRzKClcblxuICAgIGdhbWUuc2NhbGUucGFnZUFsaWduSG9yaXpvbnRhbGx5ID0gdHJ1ZVxuICAgIGdhbWUuc2NhbGUucGFnZUFsaWduVmVydGljYWxseSA9IHRydWVcbiAgICBnYW1lLnNjYWxlLnJlZnJlc2goKVxuXG4gICAgZ2FtZS5zdGF0ZS5zdGFydCgncHJlbG9hZGVyJylcbiAgfVxuXG4gIHJldHVybiBnYW1lU3RhdGVcbn1cbiIsInZhciBCdXR0b24gPSByZXF1aXJlKCcuLi9CdXR0b24uanMnKVxuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGdhbWUpIHtcblxuICB2YXIgZ2FtZVN0YXRlID0ge31cblxuICBnYW1lU3RhdGUucHJlbG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICBnYW1lLnN0YWdlLmRpc2FibGVWaXNpYmlsaXR5Q2hhbmdlID0gdHJ1ZVxuICB9XG5cbiAgZ2FtZVN0YXRlLmNyZWF0ZSA9IGZ1bmN0aW9uICgpIHtcblxuICAgIHZhciBsb2dvID0gZ2FtZS5hZGQuc3ByaXRlKGdhbWUud29ybGQuY2VudGVyWCwgMjAwLCAnbG9nbycpXG4gICAgbG9nby5hbmNob3Iuc2V0VG8oMC41LCAwLjUpXG5cbiAgICB2YXIgYSA9IG5ldyBCdXR0b24oZ2FtZSwgeyB4OiBnYW1lLndvcmxkLmNlbnRlclgsIHk6IDQ1MCwgdGV4dDogJ3NpbmdsZSBwbGF5ZXInIH0sXG4gICAgZnVuY3Rpb24gKCkge1xuICAgICAgZ2FtZS5zdGF0ZS5zdGFydCgnc2luZ2xlcGxheWVybWVudScpXG4gICAgfSlcblxuICAgIHZhciBiID0gbmV3IEJ1dHRvbihnYW1lLCB7IHg6IGdhbWUud29ybGQuY2VudGVyWCwgeTogNTAwLCB0ZXh0OiAnbXVsdGkgcGxheWVyJyB9LFxuICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgIGdhbWUuc3RhdGUuc3RhcnQoJ211bHRpcGxheWVybWVudScpXG4gICAgfSlcblxuICAgIHZhciBjID0gbmV3IEJ1dHRvbihnYW1lLCB7IHg6IGdhbWUud29ybGQuY2VudGVyWCwgeTogNTUwLCB0ZXh0OiAnc2V0dGluZ3MnIH0sXG4gICAgZnVuY3Rpb24gKCkge1xuICAgICAgZ2FtZS5zdGF0ZS5zdGFydCgnc2V0dGluZ3NtZW51JylcbiAgICB9KVxuICB9XG5cbiAgZ2FtZVN0YXRlLnVwZGF0ZSA9IGZ1bmN0aW9uKCkge1xuICBcdFxuICB9XG5cbiAgcmV0dXJuIGdhbWVTdGF0ZVxufVxuIiwidmFyIEJ1dHRvbiA9IHJlcXVpcmUoJy4uL0J1dHRvbi5qcycpXG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oZ2FtZSkge1xuXG4gIHZhciBnYW1lU3RhdGUgPSB7fVxuXG4gIGdhbWVTdGF0ZS5wcmVsb2FkID0gZnVuY3Rpb24gKCkge1xuICAgIGdhbWUuc3RhZ2UuZGlzYWJsZVZpc2liaWxpdHlDaGFuZ2UgPSB0cnVlXG4gIH1cblxuICBnYW1lU3RhdGUuY3JlYXRlID0gZnVuY3Rpb24gKCkge1xuXG4gICAgdmFyIGJhY2tCdXR0b24gPSBuZXcgQnV0dG9uKGdhbWUsIHsgeDogMTAwLCB5OiA1MCwgdGV4dDogJ2JhY2snIH0sXG4gICAgZnVuY3Rpb24gKCkge1xuICAgICAgZ2FtZS5zdGF0ZS5zdGFydCgnbWFpbm1lbnUnKVxuICAgIH0pXG5cbiAgICB2YXIgdHJhaW5CdXR0b24gPSBuZXcgQnV0dG9uKGdhbWUsIHsgeDogZ2FtZS53b3JsZC5jZW50ZXJYLCB5OiAzMDAsIHRleHQ6ICdxdWlja21hdGNoJyB9LFxuICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgIGdhbWUuc3RhdGUuc3RhcnQoJ3F1aWNrbWF0Y2gnKVxuICAgIH0pXG5cbiAgfVxuXG4gIHJldHVybiBnYW1lU3RhdGVcbn0iLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGdhbWUpIHtcblxuICB2YXIgZ2FtZVN0YXRlID0ge31cblxuICBnYW1lU3RhdGUucHJlbG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICBnYW1lLnN0YWdlLmRpc2FibGVWaXNpYmlsaXR5Q2hhbmdlID0gdHJ1ZVxuXG4gICAgZ2FtZS5sb2FkLmltYWdlKCdsb2dvJywgJ2ltYWdlcy9waGFzZXIucG5nI2dydW50LWNhY2hlLWJ1c3QnKVxuICAgIGdhbWUubG9hZC5pbWFnZSgncmVkc3F1YXJlJywgJ2ltYWdlcy9yZWRzcXVhcmUucG5nI2dydW50LWNhY2hlLWJ1c3QnKVxuICAgIGdhbWUubG9hZC5pbWFnZSgnYmx1ZXNxdWFyZScsICdpbWFnZXMvYmx1ZXNxdWFyZS5qcGcjZ3J1bnQtY2FjaGUtYnVzdCcpXG4gICAgZ2FtZS5sb2FkLmltYWdlKCd3aGl0ZXNxdWFyZScsICdpbWFnZXMvd2hpdGVzcXVhcmUucG5nI2dydW50LWNhY2hlLWJ1c3QnKVxuICB9XG5cbiAgZ2FtZVN0YXRlLmNyZWF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICBnYW1lLnN0YXRlLnN0YXJ0KCdtYWlubWVudScpXG4gIH1cblxuICByZXR1cm4gZ2FtZVN0YXRlXG59XG4iLCJ2YXIgUGxheWVyID0gcmVxdWlyZSgnLi4vUGxheWVyLmpzJylcbnZhciBBcmVuYSA9IHJlcXVpcmUoJy4uL0FyZW5hLmpzJylcbnZhciBCdXR0b24gPSByZXF1aXJlKCcuLi9CdXR0b24uanMnKVxuXG52YXIgc29ja2V0XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oZ2FtZSkge1xuXG4gIHZhciBnYW1lU3RhdGUgPSB7fVxuXG4gIHZhciBwMSwgcDIsIGlzUDEsIGlzUDJcblxuICB2YXIgaWRcblxuICB2YXIgcGxheWVycyA9IFtdXG5cbiAgdmFyIGZyYW1lQ291bnQgPSAwXG4gIHZhciBuZXdUdXJuID0gZmFsc2VcbiAgdmFyIGhhc1BsYXllZEJhY2sgPSBmYWxzZVxuICB2YXIgaXNTcGFjZWJhckxvY2tlZCA9IGZhbHNlXG5cbiAgdmFyIGN1cnJlbnRXYXJuaW5nXG5cbiAgdmFyIGFyZW5hXG5cbiAgZ2FtZVN0YXRlLnByZWxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgZ2FtZS5zdGFnZS5kaXNhYmxlVmlzaWJpbGl0eUNoYW5nZSA9IHRydWVcbiAgfVxuXG4gIGdhbWVTdGF0ZS5jcmVhdGUgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICBzb2NrZXQgPSBpbygnaHR0cDovL2xvY2FsaG9zdDo5MDAwJylcblxuICAgIGFyZW5hID0gbmV3IEFyZW5hKGdhbWUpXG4gICAgYXJlbmEuY3JlYXRlUGxheWVycygpXG4gICAgYXJlbmEubmV3VHVybigpXG5cbiAgICBwMSA9IGFyZW5hLnBsYXllcnNbJ3AxJ11cbiAgICBwMiA9IGFyZW5hLnBsYXllcnNbJ3AyJ11cblxuICAgIHZhciBiYWNrQnV0dG9uID0gbmV3IEJ1dHRvbihnYW1lLCB7IHg6IDEwMCwgeTogNTAsIHRleHQ6ICdiYWNrJyB9LFxuICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgIGdhbWUuc3RhdGUuc3RhcnQoJ211bHRpcGxheWVybWVudScpXG4gICAgfSlcblxuICAgIGZ1bmN0aW9uIHdhcm5pbmcgKG1lc3NhZ2UpIHtcbiAgICAgIGlmKCFjdXJyZW50V2FybmluZykge1xuICAgICAgICBjdXJyZW50V2FybmluZyA9IGdhbWUuYWRkLnRleHQoZ2FtZS53b3JsZC5jZW50ZXJYLCAxNTAsIG1lc3NhZ2UsIHsgZm9udDogJzMwcHggQXJpYWwnLCBmaWxsOiAnI2ZmZmZmZicsIGFsaWduOiAnY2VudGVyJyB9IClcbiAgICAgICAgY3VycmVudFdhcm5pbmcuYW5jaG9yLnNldFRvKDAuNSwgMC41KVxuICAgICAgfVxuICAgICAgY3VycmVudFdhcm5pbmcuX3RleHQgPSBtZXNzYWdlXG4gICAgICB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbiAoKSB7IFxuICAgICAgICBnYW1lLmFkZC50d2VlbihjdXJyZW50V2FybmluZykudG8oIHthbHBoYTogMH0sIDEwMDAsIFBoYXNlci5FYXNpbmcuTGluZWFyLk5vbmUsIHRydWUpXG4gICAgICB9LCAxMDAwKVxuICAgIH1cblxuICAgIC8vXG5cbiAgICBzb2NrZXQuZW1pdCgnam9pbi1sb2JieScpXG5cbiAgICBzb2NrZXQub24oJ2lkJywgZnVuY3Rpb24oc29ja2V0SWQpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdpZCcsIHNvY2tldElkKVxuICAgICAgaWQgPSBzb2NrZXRJZFxuICAgICAgd2FybmluZygneW91IGFyZSAnICsgaWQpXG4gICAgfSlcblxuICAgIC8vIGNvdWxkIHJlY3ljbGUgdGV4dCBvYmplY3RzXG4gICAgc29ja2V0Lm9uKCdwbGF5ZXJzLWxpc3QnLCBmdW5jdGlvbiAocGxheWVyTGlzdCkge1xuICAgICAgcGxheWVycy5mb3JFYWNoKGZ1bmN0aW9uIChwKSB7IHAuZGVzdHJveSgpIH0pXG4gICAgICBwbGF5ZXJzID0gcGxheWVyTGlzdC5tYXAoZnVuY3Rpb24ocGxheWVyLCBpKSB7XG4gICAgICAgIHJldHVybiBnYW1lLmFkZC50ZXh0KDU1MCwgMjAqKGkrMSksIHBsYXllciwge2ZpbGw6ICcjZmZmZmZmJywgZm9udDogJzE2cHggQXJpYWwnfSlcbiAgICAgIH0pXG4gICAgfSlcblxuICAgIHNvY2tldC5vbignbmV3LWdhbWUnLCBmdW5jdGlvbiAocGxheWVycykge1xuICAgICAgd2FybmluZygnZ2FtZSBzdGFydGluZy4uLicpXG4gICAgICBjb25zb2xlLmxvZygnbmV3LWdhbWUnLCBwbGF5ZXJzKVxuXG4gICAgICBpZihwbGF5ZXJzLnAxID09PSBpZCkge1xuICAgICAgICBpc1AxID0gdHJ1ZVxuICAgICAgICBwMS5zZXRDb250cm9sbGVyKCdtZScpXG4gICAgICAgIHdhcm5pbmcoJ3lvdSBhcmUgcDEnKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaXNQMiA9IGZhbHNlXG4gICAgICAgIHAxLnNldENvbnRyb2xsZXIoJ25ldHdvcmsnKVxuICAgICAgfVxuXG4gICAgICBpZihwbGF5ZXJzLnAyID09PSBpZCkge1xuICAgICAgICBpc1AyID0gdHJ1ZVxuICAgICAgICBwMi5zZXRDb250cm9sbGVyKCdtZScpXG4gICAgICAgIHdhcm5pbmcoJ3lvdSBhcmUgcDInKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaXNQMiA9IGZhbHNlXG4gICAgICAgIHAyLnNldENvbnRyb2xsZXIoJ25ldHdvcmsnKVxuICAgICAgfVxuXG4gICAgICBhcmVuYS5yZXNldFBsYXllcnMoKVxuICAgICAgYXJlbmEubmV3VHVybigpXG5cbiAgICAgIHNvY2tldC5vbigndHVybicsIGZ1bmN0aW9uICh0dXJuKSB7XG4gICAgICAgIGZyYW1lQ291bnQgPSAwXG4gICAgICAgIHAxLnNldExhc3RUdXJuKHR1cm4ucDEpXG4gICAgICAgIHAyLnNldExhc3RUdXJuKHR1cm4ucDIpXG4gICAgICAgIHAxLmxvYWRQb3NpdGlvbigpXG4gICAgICAgIHAyLmxvYWRQb3NpdGlvbigpXG4gICAgICAgIG5ld1R1cm4gPSB0cnVlXG4gICAgICAgIGNvbnNvbGUubG9nKHR1cm4pXG4gICAgICB9KVxuICAgIH0pXG5cbiAgICBzb2NrZXQub24oJ2dhbWUtb3ZlcicsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHdhcm5pbmcoJ2dhbWUgb3ZlcicpXG4gICAgICBhcmVuYS5yZXNldFBsYXllcnMoKVxuICAgICAgYXJlbmEubmV3VHVybigpXG4gICAgfSlcblxuICAgIC8vIGRlYnVnXG4gICAgd2luZG93LnNvY2tldCA9IHNvY2tldFxuICAgIHdpbmRvdy5nYW1lID0gZ2FtZVxuICAgIHdpbmRvdy5wMSA9IHAxXG4gICAgd2luZG93LnAyID0gcDJcblxuICB9XG5cbiAgZ2FtZVN0YXRlLnVwZGF0ZSA9IGZ1bmN0aW9uICgpIHtcblxuICAgIGlmKHAxICYmIHAyKSB7XG5cbiAgICAgIGZyYW1lQ291bnQrK1xuXG4gICAgICBpZihwMS5yZXNldFBsYXliYWNrKCkgfHwgcDIucmVzZXRQbGF5YmFjaygpKSB7XG4gICAgICAgIGFyZW5hLnNhbWVUdXJuKClcbiAgICAgICAgZnJhbWVDb3VudCA9IDBcbiAgICAgIH1cblxuICAgICAgaWYoZnJhbWVDb3VudCA9PT0gMSAmJiBuZXdUdXJuID09PSB0cnVlKSB7XG4gICAgICAgIGFyZW5hLmNpbmVtYXRpY1BsYXliYWNrKClcbiAgICAgICAgaGFzUGxheWVkQmFjayA9IHRydWVcbiAgICAgIH1cblxuICAgICAgaWYoZnJhbWVDb3VudCA9PT0gMTAwKSB7XG4gICAgICAgIGZyYW1lQ291bnQgPSAwXG5cbiAgICAgICAgaWYobmV3VHVybiA9PT0gdHJ1ZSAmJiBoYXNQbGF5ZWRCYWNrID09PSB0cnVlKSB7XG4gICAgICAgICAgYXJlbmEubmV3VHVybigpXG4gICAgICAgICAgbmV3VHVybiA9IGZhbHNlXG4gICAgICAgICAgaGFzUGxheWVkQmFjayA9IGZhbHNlXG4gICAgICAgICAgaXNTcGFjZWJhckxvY2tlZCA9IGZhbHNlXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYXJlbmEuc2FtZVR1cm4oKVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmKGdhbWUuaW5wdXQua2V5Ym9hcmQuanVzdFByZXNzZWQoUGhhc2VyLktleWJvYXJkLlNQQUNFQkFSKSkge1xuICAgICAgICBpZihpc1AxIHx8IGlzUDIpIHtcbiAgICAgICAgICBpZihpc1NwYWNlYmFyTG9ja2VkID09PSBmYWxzZSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1NQQUNFQkFSJylcbiAgICAgICAgICAgIHZhciBwID0gaXNQMSA/IHAxIDogcDJcbiAgICAgICAgICAgIHNvY2tldC5lbWl0KCdhY3Rpb24nLCBwLmdldExhc3RUdXJuKCkpXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhwLmdldExhc3RUdXJuKCkpXG4gICAgICAgICAgICBpc1NwYWNlYmFyTG9ja2VkID0gdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGdhbWVTdGF0ZS5zaHV0ZG93biA9IGZ1bmN0aW9uICgpIHtcbiAgICBzb2NrZXQuZW1pdCgnbGVhdmUtbG9iYnknKVxuICAgIGFyZW5hLmRlc3Ryb3koKVxuICB9XG5cbiAgcmV0dXJuIGdhbWVTdGF0ZVxufSIsInZhciBCdXR0b24gPSByZXF1aXJlKCcuLi9CdXR0b24uanMnKVxuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGdhbWUpIHtcblxuICB2YXIgZ2FtZVN0YXRlID0ge31cblxuICBnYW1lU3RhdGUucHJlbG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICBnYW1lLnN0YWdlLmRpc2FibGVWaXNpYmlsaXR5Q2hhbmdlID0gdHJ1ZVxuICB9XG5cbiAgZ2FtZVN0YXRlLmNyZWF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgYmFja0J1dHRvbiA9IG5ldyBCdXR0b24oZ2FtZSwgeyB4OiAxMDAsIHk6IDUwLCB0ZXh0OiAnYmFjaycgfSxcbiAgICBmdW5jdGlvbiAoKSB7XG4gICAgICBnYW1lLnN0YXRlLnN0YXJ0KCdtYWlubWVudScpXG4gICAgfSlcbiAgfVxuXG4gIHJldHVybiBnYW1lU3RhdGVcbn0iLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGdhbWUpIHtcblxuICB2YXIgZ2FtZVN0YXRlID0ge31cblxuICBnYW1lU3RhdGUucHJlbG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICBnYW1lLnN0YWdlLmRpc2FibGVWaXNpYmlsaXR5Q2hhbmdlID0gdHJ1ZVxuICB9XG5cbiAgZ2FtZVN0YXRlLmNyZWF0ZSA9IGZ1bmN0aW9uICgpIHtcblxuICBcdHZhciBzdHlsZSA9IHsgZm9udDogJzQwcHggQXJpYWwnLCBmaWxsOiAnI2ZmZmZmZicsIGFsaWduOiAnY2VudGVyJ31cbiAgXHR2YXIgbWFpbk1lbnVCdXR0b24gPSBnYW1lLmFkZC50ZXh0KDEwMCwgNTAsICdiYWNrJywgc3R5bGUpXG4gICAgbWFpbk1lbnVCdXR0b24uYW5jaG9yLnNldFRvKDAuNSwgMC41KVxuICAgIG1haW5NZW51QnV0dG9uLmlucHV0RW5hYmxlZCA9IHRydWVcbiAgICBtYWluTWVudUJ1dHRvbi5ldmVudHMub25JbnB1dERvd24uYWRkKGZ1bmN0aW9uKCkge1xuXHRcdFx0Z2FtZS5zdGF0ZS5zdGFydCgnbWFpbm1lbnUnKVxuICAgIH0pXG5cbiAgXHR2YXIgdHJhaW4gPSBnYW1lLmFkZC50ZXh0KGdhbWUud29ybGQuY2VudGVyWCwgMzAwLCAndHJhaW4nLCBzdHlsZSlcbiAgICB0cmFpbi5hbmNob3Iuc2V0VG8oMC41LCAwLjUpXG4gICAgdHJhaW4uaW5wdXRFbmFibGVkID0gdHJ1ZVxuICAgIHRyYWluLmV2ZW50cy5vbklucHV0RG93bi5hZGQoZnVuY3Rpb24oKSB7XG5cdFx0XHRnYW1lLnN0YXRlLnN0YXJ0KCd0cmFpbicpXG4gICAgfSlcbiAgfVxuXG4gIHJldHVybiBnYW1lU3RhdGVcbn1cbiIsInZhciBQbGF5ZXIgPSByZXF1aXJlKCcuLi9QbGF5ZXIuanMnKVxudmFyIEFyZW5hID0gcmVxdWlyZSgnLi4vQXJlbmEuanMnKVxudmFyIEJ1dHRvbiA9IHJlcXVpcmUoJy4uL0J1dHRvbi5qcycpXG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oZ2FtZSkge1xuXG4gIHZhciBnYW1lU3RhdGUgPSB7fVxuXG4gIHZhciBhcmVuYVxuXG4gIGdhbWVTdGF0ZS5wcmVsb2FkID0gZnVuY3Rpb24gKCkge1xuICAgIGdhbWUuc3RhZ2UuZGlzYWJsZVZpc2liaWxpdHlDaGFuZ2UgPSB0cnVlXG4gIH1cblxuICBnYW1lU3RhdGUuY3JlYXRlID0gZnVuY3Rpb24gKCkge1xuXG4gICAgLy8gYmFjayBidXR0b25cbiAgICB2YXIgYmFja0J1dHRvbiA9IG5ldyBCdXR0b24oZ2FtZSwgeyB4OiAxMDAsIHk6IDUwLCB0ZXh0OiAnYmFjaycgfSxcbiAgICBmdW5jdGlvbiAoKSB7XG4gICAgICBnYW1lLnN0YXRlLnN0YXJ0KCdzaW5nbGVwbGF5ZXJtZW51JylcbiAgICB9KVxuXG4gICAgYXJlbmEgPSBuZXcgQXJlbmEoZ2FtZSlcbiAgICBhcmVuYS5jcmVhdGVQbGF5ZXJzKClcbiAgICBhcmVuYS5zZXRDb250cm9sbGVycygnbWUnLCAnZHVtbXknKVxuICAgIGFyZW5hLm5ld1R1cm4oKVxuICB9XG5cbiAgdmFyIGZyYW1lQ291bnQgPSAwXG4gIHZhciBuZXdUdXJuID0gZmFsc2VcbiAgdmFyIGhhc1BsYXllZEJhY2sgPSBmYWxzZVxuXG4gIGdhbWVTdGF0ZS51cGRhdGUgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICBmcmFtZUNvdW50KytcblxuICAgIGlmKGFyZW5hLnBsYXllcnNbJ3AxJ10ucmVzZXRQbGF5YmFjaygpIHx8IGFyZW5hLnBsYXllcnNbJ3AyJ10ucmVzZXRQbGF5YmFjaygpKSB7XG4gICAgICBmcmFtZUNvdW50ID0gMFxuICAgICAgYXJlbmEuc2FtZVR1cm4oKVxuICAgIH1cblxuICAgIGlmKGZyYW1lQ291bnQgPT09IDEgJiYgbmV3VHVybiA9PT0gdHJ1ZSkge1xuICAgICAgYXJlbmEuY2luZW1hdGljUGxheWJhY2soKVxuICAgICAgaGFzUGxheWVkQmFjayA9IHRydWVcbiAgICB9XG5cbiAgICBpZihmcmFtZUNvdW50ID09PSAxMDApIHtcbiAgICAgIGZyYW1lQ291bnQgPSAwXG5cbiAgICAgIGlmKG5ld1R1cm4gPT09IHRydWUgJiYgaGFzUGxheWVkQmFjayA9PT0gdHJ1ZSkge1xuICAgICAgICBhcmVuYS5uZXdUdXJuKClcbiAgICAgICAgbmV3VHVybiA9IGZhbHNlXG4gICAgICAgIGhhc1BsYXllZEJhY2sgPSBmYWxzZVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYXJlbmEuc2FtZVR1cm4oKVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmKGdhbWUuaW5wdXQua2V5Ym9hcmQuanVzdFByZXNzZWQoUGhhc2VyLktleWJvYXJkLlNQQUNFQkFSKSkge1xuICAgICAgbmV3VHVybiA9IHRydWVcbiAgICB9XG4gIH1cblxuICBnYW1lU3RhdGUuc2h1dGRvd24gPSBmdW5jdGlvbiAoKSB7XG4gICAgYXJlbmEuZGVzdHJveSgpXG4gIH1cblxuICByZXR1cm4gZ2FtZVN0YXRlXG59IiwiKGZ1bmN0aW9uIChnbG9iYWwpe1xuO19fYnJvd3NlcmlmeV9zaGltX3JlcXVpcmVfXz1yZXF1aXJlOyhmdW5jdGlvbiBicm93c2VyaWZ5U2hpbShtb2R1bGUsIGV4cG9ydHMsIHJlcXVpcmUsIGRlZmluZSwgYnJvd3NlcmlmeV9zaGltX19kZWZpbmVfX21vZHVsZV9fZXhwb3J0X18pIHtcbi8vIHN0YXRzLmpzIC0gaHR0cDovL2dpdGh1Yi5jb20vbXJkb29iL3N0YXRzLmpzXG52YXIgU3RhdHM9ZnVuY3Rpb24oKXt2YXIgbD1EYXRlLm5vdygpLG09bCxnPTAsbj1JbmZpbml0eSxvPTAsaD0wLHA9SW5maW5pdHkscT0wLHI9MCxzPTAsZj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2YuaWQ9XCJzdGF0c1wiO2YuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLGZ1bmN0aW9uKGIpe2IucHJldmVudERlZmF1bHQoKTt0KCsrcyUyKX0sITEpO2Yuc3R5bGUuY3NzVGV4dD1cIndpZHRoOjgwcHg7b3BhY2l0eTowLjk7Y3Vyc29yOnBvaW50ZXJcIjt2YXIgYT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2EuaWQ9XCJmcHNcIjthLnN0eWxlLmNzc1RleHQ9XCJwYWRkaW5nOjAgMCAzcHggM3B4O3RleHQtYWxpZ246bGVmdDtiYWNrZ3JvdW5kLWNvbG9yOiMwMDJcIjtmLmFwcGVuZENoaWxkKGEpO3ZhciBpPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7aS5pZD1cImZwc1RleHRcIjtpLnN0eWxlLmNzc1RleHQ9XCJjb2xvcjojMGZmO2ZvbnQtZmFtaWx5OkhlbHZldGljYSxBcmlhbCxzYW5zLXNlcmlmO2ZvbnQtc2l6ZTo5cHg7Zm9udC13ZWlnaHQ6Ym9sZDtsaW5lLWhlaWdodDoxNXB4XCI7XG5pLmlubmVySFRNTD1cIkZQU1wiO2EuYXBwZW5kQ2hpbGQoaSk7dmFyIGM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtjLmlkPVwiZnBzR3JhcGhcIjtjLnN0eWxlLmNzc1RleHQ9XCJwb3NpdGlvbjpyZWxhdGl2ZTt3aWR0aDo3NHB4O2hlaWdodDozMHB4O2JhY2tncm91bmQtY29sb3I6IzBmZlwiO2ZvcihhLmFwcGVuZENoaWxkKGMpOzc0PmMuY2hpbGRyZW4ubGVuZ3RoOyl7dmFyIGo9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7ai5zdHlsZS5jc3NUZXh0PVwid2lkdGg6MXB4O2hlaWdodDozMHB4O2Zsb2F0OmxlZnQ7YmFja2dyb3VuZC1jb2xvcjojMTEzXCI7Yy5hcHBlbmRDaGlsZChqKX12YXIgZD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2QuaWQ9XCJtc1wiO2Quc3R5bGUuY3NzVGV4dD1cInBhZGRpbmc6MCAwIDNweCAzcHg7dGV4dC1hbGlnbjpsZWZ0O2JhY2tncm91bmQtY29sb3I6IzAyMDtkaXNwbGF5Om5vbmVcIjtmLmFwcGVuZENoaWxkKGQpO3ZhciBrPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG5rLmlkPVwibXNUZXh0XCI7ay5zdHlsZS5jc3NUZXh0PVwiY29sb3I6IzBmMDtmb250LWZhbWlseTpIZWx2ZXRpY2EsQXJpYWwsc2Fucy1zZXJpZjtmb250LXNpemU6OXB4O2ZvbnQtd2VpZ2h0OmJvbGQ7bGluZS1oZWlnaHQ6MTVweFwiO2suaW5uZXJIVE1MPVwiTVNcIjtkLmFwcGVuZENoaWxkKGspO3ZhciBlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7ZS5pZD1cIm1zR3JhcGhcIjtlLnN0eWxlLmNzc1RleHQ9XCJwb3NpdGlvbjpyZWxhdGl2ZTt3aWR0aDo3NHB4O2hlaWdodDozMHB4O2JhY2tncm91bmQtY29sb3I6IzBmMFwiO2ZvcihkLmFwcGVuZENoaWxkKGUpOzc0PmUuY2hpbGRyZW4ubGVuZ3RoOylqPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpLGouc3R5bGUuY3NzVGV4dD1cIndpZHRoOjFweDtoZWlnaHQ6MzBweDtmbG9hdDpsZWZ0O2JhY2tncm91bmQtY29sb3I6IzEzMVwiLGUuYXBwZW5kQ2hpbGQoaik7dmFyIHQ9ZnVuY3Rpb24oYil7cz1iO3N3aXRjaChzKXtjYXNlIDA6YS5zdHlsZS5kaXNwbGF5PVxuXCJibG9ja1wiO2Quc3R5bGUuZGlzcGxheT1cIm5vbmVcIjticmVhaztjYXNlIDE6YS5zdHlsZS5kaXNwbGF5PVwibm9uZVwiLGQuc3R5bGUuZGlzcGxheT1cImJsb2NrXCJ9fTtyZXR1cm57UkVWSVNJT046MTEsZG9tRWxlbWVudDpmLHNldE1vZGU6dCxiZWdpbjpmdW5jdGlvbigpe2w9RGF0ZS5ub3coKX0sZW5kOmZ1bmN0aW9uKCl7dmFyIGI9RGF0ZS5ub3coKTtnPWItbDtuPU1hdGgubWluKG4sZyk7bz1NYXRoLm1heChvLGcpO2sudGV4dENvbnRlbnQ9ZytcIiBNUyAoXCIrbitcIi1cIitvK1wiKVwiO3ZhciBhPU1hdGgubWluKDMwLDMwLTMwKihnLzIwMCkpO2UuYXBwZW5kQ2hpbGQoZS5maXJzdENoaWxkKS5zdHlsZS5oZWlnaHQ9YStcInB4XCI7cisrO2I+bSsxRTMmJihoPU1hdGgucm91bmQoMUUzKnIvKGItbSkpLHA9TWF0aC5taW4ocCxoKSxxPU1hdGgubWF4KHEsaCksaS50ZXh0Q29udGVudD1oK1wiIEZQUyAoXCIrcCtcIi1cIitxK1wiKVwiLGE9TWF0aC5taW4oMzAsMzAtMzAqKGgvMTAwKSksYy5hcHBlbmRDaGlsZChjLmZpcnN0Q2hpbGQpLnN0eWxlLmhlaWdodD1cbmErXCJweFwiLG09YixyPTApO3JldHVybiBifSx1cGRhdGU6ZnVuY3Rpb24oKXtsPXRoaXMuZW5kKCl9fX07XG47IGJyb3dzZXJpZnlfc2hpbV9fZGVmaW5lX19tb2R1bGVfX2V4cG9ydF9fKHR5cGVvZiBTdGF0cyAhPSBcInVuZGVmaW5lZFwiID8gU3RhdHMgOiB3aW5kb3cuU3RhdHMpO1xuXG59KS5jYWxsKGdsb2JhbCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBmdW5jdGlvbiBkZWZpbmVFeHBvcnQoZXgpIHsgbW9kdWxlLmV4cG9ydHMgPSBleDsgfSk7XG5cbn0pLmNhbGwodGhpcyx0eXBlb2Ygc2VsZiAhPT0gXCJ1bmRlZmluZWRcIiA/IHNlbGYgOiB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiID8gd2luZG93IDoge30pIl19
